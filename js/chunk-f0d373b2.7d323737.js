(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f0d373b2"],{"1cfb":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"crosswalk section has-background-white",attrs:{id:"crosswalk"}},[s("div",{staticClass:"modal",class:[{"is-active":e.crosswalkSaveBusy}]},[s("div",{staticClass:"modal-background"}),e._m(0)]),s("div",{staticClass:"container is-fluid"},[s("div",{staticClass:"crosswalk-column is-gapless is-paddiingless is-marginless is-multiline"},[s("div",{staticClass:"crosswalk__steps"},e._l(e.steps,(function(t,r){return s("div",{key:r,staticClass:"step-item",class:[{complete:t.complete},{current:r===e.step}]},[s("div",{staticClass:"step-marker",class:[{"has-background-primary":r===e.step},{"has-background-success":e.step>r},{"has-background-medium":e.step<r}]},["from"===t.name?s("span",{staticClass:"has-text-white"},[e._v("\n                            A\n                        ")]):e._e(),"to"===t.name?s("span",{staticClass:"has-text-white"},[e._v("\n                            B\n                        ")]):e._e(),"align"===t.name?s("i",{staticClass:"fa fa-network-wired"}):e._e(),"review"===t.name?s("i",{staticClass:"fa fa-check"}):e._e()]),s("p",{staticClass:"step-details"},[t.complete?s("span",{staticClass:"icon has-text-success"},[s("i",{staticClass:"fa fa-check"})]):e._e(),s("span",{class:[{"has-text-primary has-text-weight-bold":r===e.step},{"has-text-success":e.step>r},{"has-text-medium":e.step<r}]},[e._v("\n                            "+e._s(t.description)+"\n                        ")])])])})),0),2===e.step?s("div",{staticClass:"crosswalk__buttons"},[s("div",{staticClass:"container"},[s("h2",{staticClass:"title is-size-1"},[e._v("\n                        Crosswalk:\n                        "),e.alignmentsToSave.length>0?s("span",{staticClass:"is-size-6 is-dark tag"},[e._v("\n                            adding "+e._s(e.alignmentsToSave.length)+"\n                        ")]):e._e(),e.alignmentsToDelete.length>0?s("span",{staticClass:"tag is-size-6 is-dark"},[e._v("\n                            removing "+e._s(e.alignmentsToDelete.length)+"\n                        ")]):e._e(),e.workingAlignmentsChanged?s("span",{staticClass:"button is-pulled-right is-outlined is-primary",on:{click:e.applyWorkingAlignmentChanges}},[e._m(1),s("span",[e._v("\n                                apply alignments\n                            ")])]):e._e(),(e.alignmentsToSave.length>0||e.alignmentsToDelete.length>0)&&"ready"===e.sourceState?s("span",{staticClass:"button  is-pulled-right is-outlined is-primary",on:{click:e.goToSummaryAndSave}},[e._m(2),s("span",[e._v("\n                                save & review\n                            ")])]):e._e()])])]):e._e(),e.step<2?s("div",{staticClass:"crosswalk__search column is-6 is-offset-3"},[s("div",{staticClass:"container"},[s("SearchBar",{attrs:{view:"crosswalk",filterSet:"basic",searchType:"framework"}})],1)]):e._e(),s("transition",{attrs:{name:"slide-fade"}},[0===e.step?s("div",{staticClass:"column is-12 crosswalk__list"},[s("div",{staticClass:"container"},[s("List",{attrs:{type:e.type,repo:e.repo,view:e.view,click:e.frameworkClickSource,searchOptions:e.searchOptions,paramObj:e.paramObj,disallowEdits:!0}})],1)]):e._e()]),1===e.step?s("transition",{attrs:{name:"slide-fade"}},[s("div",{staticClass:"column is-12 crosswalk__list"},[s("div",{staticClass:"container"},[s("List",{attrs:{type:e.type,repo:e.repo,view:e.view,click:e.frameworkClickTarget,searchOptions:e.searchOptions,paramObj:e.paramObj,disallowEdits:!0}})],1)])]):e._e(),s("transition",{attrs:{name:"slide-fade"}},[2===e.step?s("div",{staticClass:"column is-12 crosswalk__double-hierarchy"},[s("div",{staticClass:"columns is-mobile crosswalk__double-heirarchy__column"},[e.crosswalkSourceLoaded?e._e():s("div",{staticClass:"column is-6 has-text-centered"},[s("span",{staticClass:"icon is-large"},[s("i",{staticClass:"fa fa-spinner fa-2x fa-pulse"})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.crosswalkSourceLoaded,expression:"crosswalkSourceLoaded"}],staticClass:"column is-6 source"},[s("Hierarchy",{attrs:{container:e.frameworkSource,view:"crosswalk",subview:"crosswalkSource",containerType:"Framework",containerTypeGet:"EcFramework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",viewOnly:"true"===e.queryParams.view,repo:e.repo,queryParams:e.queryParams,exportOptions:[],highlightList:null,properties:"primary"},on:{searchThings:function(t){return e.handleSearch(t)},doneLoadingNodes:e.prepareToLoadCrosswalkTarget}})],1),e.loadCrosswalkTarget?e._e():s("div",{staticClass:"column is-6 has-text-centered"},[s("span",{staticClass:"icon is-large"},[s("i",{staticClass:"fa fa-spinner fa-2x fa-pulse"})])]),e.loadCrosswalkTarget?s("div",{staticClass:"column is-6 target"},[s("Hierarchy",{attrs:{container:e.frameworkTarget,view:"crosswalk",subview:"crosswalkTarget",containerType:"Framework",containerTypeGet:"EcFramework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",viewOnly:"true"===e.queryParams.view,repo:e.repo,queryParams:e.queryParams,exportOptions:[],highlightList:null,properties:"primary"},on:{searchThings:function(t){return e.handleSearch(t)}}})],1):e._e()])]):e._e()]),3===e.step?s("transition",{attrs:{name:"slide-fade"}},[s("div",{staticClass:"is-narrow crosswalk__summary"},[e.alignmentsSaved?e._e():s("div",{staticClass:"box"},[s("div",{staticClass:"section"},[s("h4",{staticClass:"title is-size-2 has-text-centered"},[e._v("\n                                Crosswalk Alignment Summary\n                            ")]),e.alignmentsToSave.length>0?s("p",{staticClass:"has-text-centered"},[e._v("\n                                "+e._s(e.alignmentsToSave.length)+" alignment"),e.alignmentsToSave.length>1?s("span",[e._v("s")]):e._e(),e._v(" ready to add\n                            ")]):e._e(),e.alignmentsToDelete.length>0?s("p",{staticClass:"has-text-centered"},[e._v("\n                                "+e._s(e.alignmentsToDelete.length)+" alignment"),e.alignmentsToDelete.length>1?s("span",[e._v("s")]):e._e(),e._v(" ready to remove\n                            ")]):e._e()]),s("div",{staticClass:"section"},[s("h4",{staticClass:"title is-size-2 has-text-centered"},[e._v("\n                                Choose which framework to apply alignments\n                            ")]),e.canSaveToSourceFramework?s("div",{staticClass:"field has-text-centered"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.saveToSourceFramework,expression:"saveToSourceFramework"}],staticClass:"is-checkradio",attrs:{title:"You do not have permission to save to this framework",disabled:!e.canSaveToSourceFramework,id:"saveToSourceFramework",type:"checkbox",name:"saveToSourceFramework"},domProps:{checked:Array.isArray(e.saveToSourceFramework)?e._i(e.saveToSourceFramework,null)>-1:e.saveToSourceFramework},on:{change:function(t){var s=e.saveToSourceFramework,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=null,n=e._i(s,o);r.checked?n<0&&(e.saveToSourceFramework=s.concat([o])):n>-1&&(e.saveToSourceFramework=s.slice(0,n).concat(s.slice(n+1)))}else e.saveToSourceFramework=a}}}),s("label",{staticClass:"label",attrs:{for:"saveToSourceFramework"}},[e._v(e._s(e.frameworkSource.getName()))])]):e._e(),e.canSaveToTargetFramework?s("div",{staticClass:"field has-text-centered"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.saveToTargetFramework,expression:"saveToTargetFramework"}],staticClass:"is-checkradio",attrs:{title:"You do not have permission to save to this framework",disabled:!e.canSaveToTargetFramework,id:"saveToTargetFramework",type:"checkbox",name:"saveToTargetFramework"},domProps:{checked:Array.isArray(e.saveToTargetFramework)?e._i(e.saveToTargetFramework,null)>-1:e.saveToTargetFramework},on:{change:function(t){var s=e.saveToTargetFramework,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=null,n=e._i(s,o);r.checked?n<0&&(e.saveToTargetFramework=s.concat([o])):n>-1&&(e.saveToTargetFramework=s.slice(0,n).concat(s.slice(n+1)))}else e.saveToTargetFramework=a}}}),s("label",{staticClass:"label",attrs:{for:"saveToTargetFramework"}},[e._v(e._s(e.frameworkTarget.getName()))])]):e._e()]),e.saveToSourceFramework||e.saveToTargetFramework?s("div",{staticClass:"buttons is-spaced",staticStyle:{"margin-top":"3rem"}},[s("div",{staticClass:"button is-outlined is-dark",on:{click:e.returnToCrosswalkEditing}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-arrow-left"})]),s("span",[e._v("\n                                    continue editing\n                                ")])]),s("div",{staticClass:"button is-outlined is-primary",on:{click:e.saveAlignments}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-save"})]),s("span",[e._v("\n                                    save alignments\n                                ")])])]):e._e()]),e.alignmentsSaved?s("div",{staticClass:"container has-text-centered"},[s("h4",[s("i",{staticClass:"fa fa-check"}),e._v(" Alignments saved")])]):e._e()])]):e._e()],1)])])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-content has-text-centered"},[s("span",{staticClass:"icon is-large has-text-center has-text-link"},[s("i",{staticClass:"fas fa-2x fa-spinner is-info fa-pulse"})])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-plus"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-arrow-right"})])}],o=(s("8e6e"),s("456d"),s("6762"),s("2fdb"),s("ac4d"),s("8a81"),s("ac6a"),s("bd86")),n=s("2f62"),i=s("000d"),l=s("c643"),c=s("6b9e"),m=s("872c"),u=s("6d79");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(s,!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var h={name:"FrameworkCrosswalk",data:function(){return{view:"crosswalk",loadCrosswalkTarget:!1,crosswalkSourceLoaded:!1,canSaveToSourceFramework:!1,saveToSourceFramework:!1,canSaveToTargetFramework:!1,saveToTargetFramework:!1,alignmentsSaved:!1,crosswalkSaveBusy:!1,numAlignmentsToDelete:0,numAlignmentsDeleted:0,sourceFrameworkSaving:null,targetFrameworkSaving:null,repo:window.repo,steps:[{name:"from",description:"select source",complete:!1},{name:"to",description:"select target",complete:!1},{name:"align",description:"align frameworks",complete:!1},{name:"review",description:"save & review",complete:!1}],sortBy:"name.keyword",showMine:!1}},mixins:[m["a"],u["a"]],props:{queryParams:{type:Object,default:function(){return{}}}},components:{List:i["a"],SearchBar:c["a"],Hierarchy:l["default"]},mounted:function(){this.$store.commit("crosswalk/resetCrosswalk"),this.$store.commit("crosswalk/resetCrosswalkFrameworks")},beforeDestroy:function(){this.$store.commit("crosswalk/resetCrosswalk"),this.$store.commit("crosswalk/resetCrosswalkFrameworks")},watch:{step:function(e){console.log("step, ",e),console.log("steps, ",this.steps),0===e?(this.steps[0].complete=!1,this.steps[1].complete=!1,this.steps[2].complete=!1,this.steps[3].complete=!1,this.$store.commit("crosswalk/resetFrameworkSourceRelationships"),this.$store.commit("crosswalk/resetCrosswalkAlignmentsAndState")):1===e?(this.steps[0].complete=!0,this.steps[1].complete=!1,this.steps[2].complete=!1,this.steps[3].complete=!1,this.$store.commit("crosswalk/resetFrameworkTargetRelationships"),this.$store.commit("crosswalk/resetCrosswalkAlignmentsAndState")):2===e?(this.steps[0].complete=!0,this.steps[1].complete=!0,this.steps[2].complete=!1,this.steps[3].complete=!1):3===e?(this.steps[0].complete=!0,this.steps[1].complete=!0,this.steps[2].complete=!0,this.steps[3].complete=!1):4===e&&(this.steps[0].complete=!0,this.steps[1].complete=!0,this.steps[2].complete=!0,this.steps[3].complete=!0)},sortResults:function(){"lastEdited"===this.sortResults.id?this.sortBy="schema:dateModified":this.sortBy="name.keyword"},filteredQuickFilters:function(){this.showMine=!1;for(var e=0;e<this.filteredQuickFilters.length;e++)"ownedByMe"===this.filteredQuickFilters[e].id&&(this.showMine=!0)}},computed:g({type:function(){return"Framework"},paramObj:function(){var e={size:20},t="name.keyword"===this.sortBy||"dcterms:title.keyword"===this.sortBy?"asc":"desc";return e.sort='[ { "'+this.sortBy+'": {"order" : "'+t+'" , "unmapped_type" : "long",  "missing" : "_last"}} ]',this.queryParams&&"mine"===this.queryParams.show&&(e.ownership="me"),e},searchOptions:function(){var e="";if(this.queryParams&&null!=this.queryParams.filter&&(e+=" AND ("+this.queryParams.filter+")"),(this.showMine||this.queryParams&&"mine"===this.queryParams.show)&&EcIdentityManager.ids.length>0){e+=" AND (";for(var t=0;t<EcIdentityManager.ids.length;t++){0!==t&&(e+=" OR ");var s=EcIdentityManager.ids[t];e+='@owner:"'+s.ppk.toPk().toPem()+'"'}e+=")"}return e},filteredQuickFilters:function(){if(this.quickFilters){var e=this.quickFilters.filter((function(e){return!0===e.checked}));return console.log("filtered value",e),e}return[]}},Object(n["c"])({step:function(e){return e.crosswalk.step},frameworkSearchTerm:function(e){return e.app.frameworkSearchTerm},showRightAside:function(e){return e.app.showRightAside},frameworkSource:function(e){return e.crosswalk.frameworkSource},frameworkTarget:function(e){return e.crosswalk.frameworkTarget},frameworkSourceRelationships:function(e){return e.crosswalk.frameworkSourceRelationships},frameworkTargetRelationships:function(e){return e.crosswalk.frameworkTargetRelationships},relevantExistingAlignmentsMap:function(e){return e.crosswalk.relevantExistingAlignmentsMap},workingAlignmentsSource:function(e){return e.crosswalk.workingAlignmentsMap.source},workingAlignmentsTargets:function(e){return e.crosswalk.workingAlignmentsMap.targets},workingAlignmentsInitialTargets:function(e){return e.crosswalk.workingAlignmentsMap.initialTargets},workingAlignmentsRemovedTargets:function(e){return e.crosswalk.workingAlignmentsMap.removedTargets},workingAlignmentsChanged:function(e){return e.crosswalk.workingAlignmentsMap.changed},workingAlignmentsType:function(e){return e.crosswalk.workingAlignmentsMap.type},workingAlignmentsMap:function(e){return e.crosswalk.workingAlignmentsMap},alignmentsToSave:function(e){return e.crosswalk.alignmentsToSave},alignmentsToDelete:function(e){return e.crosswalk.alignmentsToDelete},targetState:function(e){return e.crosswalk.targetState},sourceState:function(e){return e.crosswalk.sourceState},targetNodesToHighlight:function(e){return e.crosswalk.targetNodesToHighlight}}),{},Object(n["b"])({sortResults:"app/sortResults",quickFilters:"app/quickFilters"})),methods:{determineAbilityToSaveToFrameworks:function(){this.isObjectOwnerless(this.frameworkSource)||this.doesAnyIdentityOwnObject(this.frameworkSource)?(this.canSaveToSourceFramework=!0,this.saveToSourceFramework=!0):(this.canSaveToSourceFramework=!1,this.saveToSourceFramework=!1),this.isObjectOwnerless(this.frameworkTarget)||this.doesAnyIdentityOwnObject(this.frameworkTarget)?(this.canSaveToTargetFramework=!0,this.saveToTargetFramework=!0):(this.canSaveToTargetFramework=!1,this.saveToTargetFramework=!1)},goToSummaryAndSave:function(){this.alignmentsSaved=!1,this.crosswalkSaveBusy=!1,this.determineAbilityToSaveToFrameworks(),this.$store.commit("crosswalk/step",3)},returnToCrosswalkEditing:function(){this.$store.commit("crosswalk/step",2)},addRelationshipsToFrameworks:function(){var e=this.alignmentsToSave,t=!0,s=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var n=a.value;this.saveToSourceFramework&&this.sourceFrameworkSaving.addRelation(n.shortId()),this.saveToTargetFramework&&this.targetFrameworkSaving.addRelation(n.shortId())}}catch(i){s=!0,r=i}finally{try{t||null==o.return||o.return()}finally{if(s)throw r}}},removeRelationshipsFromFrameworks:function(){var e=this.alignmentsToDelete,t=!0,s=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var n=a.value;n.id&&n.shortId()&&(this.sourceFrameworkSaving.removeRelation(n.shortId()),this.targetFrameworkSaving.removeRelation(n.shortId()))}}catch(i){s=!0,r=i}finally{try{t||null==o.return||o.return()}finally{if(s)throw r}}},generateRelationId:function(e,t,s){return"crswlk-"+Date.now()+"---"+this.genPartialIdPiece(t)+"-"+e+"-"+this.genPartialIdPiece(s)},addIdsAndOwnersToNewRelationships:function(){var e=this.alignmentsToSave,t=!0,s=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var n=a.value;n.assignId(window.repo.selectedServer,this.generateRelationId(n.relationType,n.source,n.target)),console.log("New crosswalk alignment: "+n.shortId()),this.addAllIdentityPksAsOwners(n)}}catch(i){s=!0,r=i}finally{try{t||null==o.return||o.return()}finally{if(s)throw r}}this.$store.commit("crosswalk/alignmentsToSave",e)},handleSaveTargetFrameworkSuccess:function(){this.alignmentsSaved=!0,this.crosswalkSaveBusy=!1},handleSaveTargetFrameworkFailed:function(){console.log("Failed to save target framework for crosswalk: "+msg),this.crosswalkSaveBusy=!1},saveTargetFramework:function(){this.isObjectOwnerless(this.targetFrameworkSaving)||this.doesAnyIdentityOwnObject(this.targetFrameworkSaving)?(console.log("Saving target framework for crosswalk..."),this.targetFrameworkSaving.save(this.handleSaveTargetFrameworkSuccess,this.handleSaveTargetFrameworkFailed,this.repo)):(this.alignmentsSaved=!0,this.crosswalkSaveBusy=!1)},handleSaveSourceFrameworkFailed:function(e){console.log("Failed to save source framework for crosswalk: "+e),this.crosswalkSaveBusy=!1},saveSourceFrameworkAndGo:function(){this.isObjectOwnerless(this.sourceFrameworkSaving)||this.doesAnyIdentityOwnObject(this.sourceFrameworkSaving)?(console.log("Saving source framework for crosswalk..."),this.sourceFrameworkSaving.save(this.saveTargetFramework,this.handleSaveSourceFrameworkFailed,this.repo)):this.saveTargetFramework()},saveFrameworks:function(){console.log("Saving frameworks for crosswalk..."),this.saveSourceFrameworkAndGo()},checkDeleteAlignments:function(){this.numAlignmentsDeleted+=1,this.numAlignmentsDeleted>=this.numAlignmentsToDelete?this.saveFrameworks():this.deleteAlignmentToRemove(this.numAlignmentsDeleted)},handleDeleteAlignmentFailed:function(e){console.log("Failed to remove crosswalk alignment: "+e),this.checkDeleteAlignments()},deleteAlignmentToRemove:function(e){console.log("Deleting crosswalk alignment to remove: "+e);var t=this.alignmentsToDelete[e];this.repo.deleteRegistered(t,this.checkDeleteAlignments,this.handleDeleteAlignmentFailed)},deleteAlignmentsToRemoveAndGo:function(){this.alignmentsToDelete.length>0?(console.log("Deleting crosswalk alignments to remove..."),this.deleteAlignmentToRemove(0)):this.saveFrameworks()},handleSaveAlignmentsToAddSuccess:function(){console.log("New crosswalk alignments added"),this.deleteAlignmentsToRemoveAndGo()},handleSaveAlignmentsToAddFailed:function(e){console.log("Failed to add crosswalk alignments: "+e),this.crosswalkSaveBusy=!1},saveAlignmentsToAddAndGo:function(){var e=this.alignmentsToSave;e.length>0?(console.log("Saving crosswalk alignments to add..."),this.repo.multiput(e,this.handleSaveAlignmentsToAddSuccess,this.handleSaveAlignmentsToAddFailed)):this.deleteAlignmentsToRemoveAndGo()},saveAlignments:function(){this.saveToSourceFramework||this.saveToTargetFramework?(this.crosswalkSaveBusy=!0,this.numAlignmentsToDelete=this.alignmentsToDelete.length,this.numAlignmentsDeleted=0,this.sourceFrameworkSaving=this.frameworkSource,this.targetFrameworkSaving=this.frameworkTarget,this.addIdsAndOwnersToNewRelationships(),this.addRelationshipsToFrameworks(),this.removeRelationshipsFromFrameworks(),this.saveAlignmentsToAddAndGo()):this.alignmentsSaved=!0},prepareToLoadCrosswalkTarget:function(){var e=this;this.crosswalkSourceLoaded=!0,setTimeout((function(){e.loadCrosswalkTarget=!0}),2e3)},getEcAlignmentObjectFromRelevantAlignmentsMap:function(e,t,s){var r=null;return this.relevantExistingAlignmentsMap[e]&&this.relevantExistingAlignmentsMap[e][s]&&this.relevantExistingAlignmentsMap[e][s][t]&&(r=this.relevantExistingAlignmentsMap[e][s][t]),r},applyRemovedWorkingAlignmentChanges:function(){var e=!0,t=!1,s=void 0;try{for(var r,a=this.workingAlignmentsRemovedTargets[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value,n=this.getEcAlignmentObjectFromRelevantAlignmentsMap(this.workingAlignmentsSource,o,this.workingAlignmentsType);n&&n.id&&""!==n.id.trim()&&this.$store.commit("crosswalk/appendAlignmentsToDelete",n);var i={};i.source=this.workingAlignmentsSource,i.target=o,i.type=this.workingAlignmentsType,this.$store.commit("crosswalk/removeAlignmentFromRelevantAlignmentsMap",i),this.$store.commit("crosswalk/removeAlignmentFromAlignmentsToSave",i)}}catch(l){t=!0,s=l}finally{try{e||null==a.return||a.return()}finally{if(t)throw s}}},getAndRemoveEcAlignmentObjectFromAlignmentsToDelete:function(e){var t=null,s=!0,r=!1,a=void 0;try{for(var o,n=this.alignmentsToDelete[Symbol.iterator]();!(s=(o=n.next()).done);s=!0){var i=o.value;i.source===e.source&&i.target===e.target&&i.relationType===e.type&&(t=i)}}catch(l){r=!0,a=l}finally{try{s||null==n.return||n.return()}finally{if(r)throw a}}return t&&this.$store.commit("crosswalk/removeAlignmentFromAlignmentsToDelete",e),t},genPartialIdPiece:function(e){return e.lastIndexOf("/")<=-1?e:e.substr(e.lastIndexOf("/")+1)},generateAlignmentObjectFromAlignProps:function(e){var t=new EcAlignment;return this.addAllIdentityPksAsOwners(t),t.target=e.target,t.source=e.source,t.relationType=e.type,t},applyAddedWorkingAlignmentChanges:function(){var e=this,t=this.workingAlignmentsTargets.filter((function(t){return!e.workingAlignmentsInitialTargets.includes(t)})),s=!0,r=!1,a=void 0;try{for(var o,n=t[Symbol.iterator]();!(s=(o=n.next()).done);s=!0){var i=o.value,l={};l.source=this.workingAlignmentsSource,l.target=i,l.type=this.workingAlignmentsType;var c=this.getAndRemoveEcAlignmentObjectFromAlignmentsToDelete(l);c||(c=this.generateAlignmentObjectFromAlignProps(l)),c.id&&""!==c.id.trim()||this.$store.commit("crosswalk/appendAlignmentsToSave",c),this.$store.commit("crosswalk/addAlignmentToRelevantAlignmentsMap",c)}}catch(m){r=!0,a=m}finally{try{s||null==n.return||n.return()}finally{if(r)throw a}}},applyWorkingAlignmentChanges:function(){this.workingAlignmentsChanged&&(this.applyRemovedWorkingAlignmentChanges(),this.applyAddedWorkingAlignmentChanges(),this.$store.commit("crosswalk/relevantExistingAlignmentsMapLastUpdate",Date.now()),this.$store.commit("crosswalk/populateAlignedCompetenciesList")),this.$store.commit("crosswalk/sourceState","ready"),this.$store.commit("crosswalk/resetWorkingAlignmentsMap")},addRelationshipListToRelevantAlignments:function(e,t,s){var r=!0,a=!1,o=void 0;try{for(var n,i=e[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){var l=n.value;t.includes(l.shortId)||(t.push(l.shortId()),this.frameworkSource.competency.includes(l.source)&&this.frameworkTarget.competency.includes(l.target)&&(s[l.source]||(s[l.source]={}),s[l.source][l.relationType]||(s[l.source][l.relationType]={}),s[l.source][l.relationType][l.target]||(s[l.source][l.relationType][l.target]=l)))}}catch(c){a=!0,o=c}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}},buildRelevantAlignmentsMap:function(){var e=[],t={};this.frameworkSourceRelationships&&this.frameworkTargetRelationships&&(this.addRelationshipListToRelevantAlignments(this.frameworkSourceRelationships,e,t),this.addRelationshipListToRelevantAlignments(this.frameworkTargetRelationships,e,t)),this.$store.commit("crosswalk/relevantExistingAlignmentsMap",t),this.$store.commit("crosswalk/populateAlignedCompetenciesList")},handleBuildFrameworkTargetRelationshipsSuccess:function(e){console.log("Building framework target relationship list..."),this.$store.commit("crosswalk/frameworkTargetRelationships",this.buildEcAlignmentsFromRemoteLinkedData(e)),this.buildRelevantAlignmentsMap(),this.$store.commit("crosswalk/step",2)},buildFrameworkTargetRelationships:function(){var e=window.repo;if(this.frameworkTarget.relation&&this.frameworkTarget.relation.length>0){var t=this;e.multiget(this.frameworkTarget.relation,t.handleBuildFrameworkTargetRelationshipsSuccess,(function(e){console.error("buildFrameworkTargetRelationships failed: "+e)}))}else this.handleBuildFrameworkTargetRelationshipsSuccess([])},handleBuildFrameworkSourceRelationshipsSuccess:function(e){console.log("Building framework source relationship list..."),this.$store.commit("crosswalk/frameworkSourceRelationships",this.buildEcAlignmentsFromRemoteLinkedData(e)),this.buildRelevantAlignmentsMap(),this.frameworkTarget?this.$store.commit("crosswalk/step",2):this.$store.commit("crosswalk/step",1)},buildFrameworkSourceRelationships:function(){var e=window.repo;if(this.frameworkSource.relation&&this.frameworkSource.relation.length>0){var t=this;e.multiget(this.frameworkSource.relation,t.handleBuildFrameworkSourceRelationshipsSuccess,(function(e){console.error("buildFrameworkSourceRelationships failed: "+e)}))}else this.handleBuildFrameworkSourceRelationshipsSuccess([])},frameworkClickSource:function(e){var t=this;this.$store.commit("crosswalk/resetFrameworkSourceRelationships"),EcFramework.get(e.id,(function(e){t.$store.commit("crosswalk/frameworkSource",e),t.buildFrameworkSourceRelationships()}),console.error),this.$store.commit("app/searchTerm","")},frameworkClickTarget:function(e){var t=this;this.$store.commit("crosswalk/resetFrameworkTargetRelationships"),EcFramework.get(e.id,(function(e){t.$store.commit("crosswalk/frameworkTarget",e),t.buildFrameworkTargetRelationships()}),console.error),this.$store.commit("app/searchTerm","")}}},w=h,p=(s("28a3"),s("2877")),k=Object(p["a"])(w,r,a,!1,null,null,null);t["default"]=k.exports},"1f27":function(e,t,s){"use strict";s("a481");t["a"]={methods:{exportAsn:function(e){window.open(e.replace("/data/","/asn/"),"_blank")},exportJsonld:function(e){window.open(e,"_blank")},exportRdfQuads:function(e){var t=this.framework.getName(),s=this;this.get(e,null,{Accept:"text/n4"},(function(e){s.download(t+".n4",e)}),(function(e){console.log(e)}))},exportRdfJson:function(e){var t=this.framework.getName(),s=this;this.get(e,null,{Accept:"application/rdf+json"},(function(e){s.download(t+".rdf.json",e)}),(function(e){console.log(e)}))},exportRdfXml:function(e){var t=this.framework.getName(),s=this;this.get(e,null,{Accept:"application/rdf+xml"},(function(e){s.download(t+".rdf.xml",e)}),(function(e){console.log(e)}))},exportTurtle:function(e){var t=this.framework.getName(),s=this;this.get(e,null,{Accept:"text/turtle"},(function(e){s.download(t+".turtle",e)}),(function(e){console.log(e)}))},exportCtdlasnJsonld:function(e){window.open(e.replace("/data/","/ceasn/"),"_blank")},exportCtdlasnCsv:function(e){var t=this;EcRemote.getExpectingString(e.replace("/data/","/ceasn/"),null,(function(e){CSVExport.exportCTDLASN(JSON.parse(e),t.framework.getName())}),(function(e){console.log(e)}))},exportCsv:function(){CSVExport.exportFramework(this.framework.id,console.log,console.log)},exportCasePackages:function(e){window.open(this.repo.selectedServer+"ims/case/v1p0/CFPackages/"+e,"_blank")},exportCaseItems:function(e){window.open(this.repo.selectedServer+"ims/case/v1p0/CFItems/"+e,"_blank")},download:function(e,t){var s=new Blob([t],{type:"text/plain;charset=utf-8"});saveAs(s,e)}}}},"21a6":function(e,t,s){(function(s){var r,a,o;(function(s,n){a=[],r=n,o="function"===typeof r?r.apply(t,a):r,void 0===o||(e.exports=o)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,s){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){i(r.response,t,s)},r.onerror=function(){console.error("could not download file")},r.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof s&&s.global===s?s:void 0,i=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,s){var i=n.URL||n.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?o(l):a(l.href)?r(e,t,s):o(l,l.target="_blank")):(l.href=i.createObjectURL(e),setTimeout((function(){i.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,s,n){if(s=s||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,n),s);else if(a(e))r(e,s,n);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){o(i)}))}}:function(e,t,s,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,s);var o="application/octet-stream"===e.type,i=/constructor/i.test(n.HTMLElement)||n.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&i)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},c.readAsDataURL(e)}else{var m=n.URL||n.webkitURL,u=m.createObjectURL(e);a?a.location=u:location.href=u,a=null,setTimeout((function(){m.revokeObjectURL(u)}),4e4)}});n.saveAs=i.saveAs=i,e.exports=i}))}).call(this,s("c8ba"))},"28a3":function(e,t,s){"use strict";var r=s("5443"),a=s.n(r);a.a},5443:function(e,t,s){}}]);
//# sourceMappingURL=chunk-f0d373b2.7d323737.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c6d9ebc"],{"47e0":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"has-background-white",attrs:{id:"import"}},[i("div",{staticClass:"columns is-multiline import-flex is-marginless is-gapless is-paddingless"},[i("div",{staticClass:"column is-12 import-top-flex"},[i("div",{staticClass:"section is-medium"},[i("div",{staticClass:"container"},[i("div",{staticClass:"columns is-multiline is-mobile"},[i("div",{staticClass:"column is-12"},[i("h1",{staticClass:"title is-size-1 has-text-black"},[t.conceptMode&&"true"===t.queryParams.ceasnDataFields?i("span",[t._v(" Import a concept scheme ")]):t.conceptMode?i("span",[t._v(" Import a taxonomy ")]):i("span",[t._v("Import a framework")])])]),"file"!=t.importType||t.conceptMode?"server"!=t.importType||t.conceptMode?"url"!=t.importType||t.conceptMode?t._e():i("div",{staticClass:"column is-12"},[i("p",{staticClass:"is-size-6"},[t._v(" If you know the URL of a CTDL-ASN JSON-LD graph, you can import published frameworks by URL. ")]),i("br"),i("li",{staticClass:"is-size-6"},[t._v(" This import maintains the URLs of the original frameworks and changes both the format and schema used to store the CTDL-ASN frameworks in CaSS, but does not change any of the data. ")]),i("li",{staticClass:"is-size-6"},[t._v(" If you wish to edit the framework after importing by URL, please be sure you are signed in. ")]),i("li",{staticClass:"is-size-6"},[t._v(" Please note that the Technology Skills framework below is very large and will take a long time to import. ")])]):i("div",{staticClass:"column is-12"},[i("p",{staticClass:"is-size-6"},[t._v(" If you know the URL of a IMS CASE Repository, such as OpenSalt, you can import published frameworks from that repository. ")]),i("br"),i("li",{staticClass:"is-size-6"},[t._v(" This import maintains the URLs of the CASE frameworks and changes both the format and schema used to store the CASE frameworks in CaSS, but does not change any of the data. ")]),i("li",{staticClass:"is-size-6"},[t._v(" After entering the endpoint below, you can select which frameworks you would like to import. ")]),i("li",{staticClass:"is-size-6"},[t._v(" If you wish to edit the frameworks after importing, please be sure you are signed in. ")])]):i("div",{staticClass:"column is-12"},[i("p",{staticClass:"is-size-6"},[t._v(" Competency frameworks can be imported into CaSS from the file formats listed below. ")]),i("br"),i("li",{staticClass:"is-size-6"},[t._v(" To begin, click inside the “Files to Upload” box below or drag and drop a file into the box. ")]),i("li",{staticClass:"is-size-6"},[t._v(" Once your file has been uploaded, CaSS will detect a competency framework from the file and display details about your framework. ")]),i("li",{staticClass:"is-size-6"},[t._v(" Click “Accept and Review” to review and edit your framework. ")]),i("li",{staticClass:"is-size-6"},[t._v(" Changes and additions can be made to the framework in the editor. When you are done editing your framework, click “Done Editing”. ")]),i("li",{staticClass:"is-size-6"},[t._v(" Once you are done editing, your framework is available in CaSS and may be exported in a variety of standard formats or saved by pressing “Done”. ")]),t._m(0)]),i("div",{staticClass:"column is-12"},["upload"===t.importTransition&&!t.importFile&&t.conceptMode?i("p",{staticClass:"is-size-6"},[t._v(" Upload documents to transform into CaSS "+t._s("true"===t.queryParams.ceasnDataFields?"Concept Schemes":"Taxonomies")+". ")]):"upload"!==t.importTransition||t.importFile?t._e():i("p",{staticClass:"is-size-6"},[t._v(" Upload documents to transform into CaSS Competency Frameworks. ")]),"detail"===t.importTransition?i("p",{staticClass:"is-size-6"},[i("span",{staticClass:"has-text-success has-text-weight-bold"},[t._v(" CaSS has detected a framework! ")]),i("br"),i("br"),t._v(" Please review the competency framework and file details gathered below. To continue with the input of this competency framework, press Accept Details & Review. To cancel and review or change your input file, press cancel. ")]):t._e(),"preview"===t.importTransition?i("p",{},[null!==t.frameworkSize?i("span",{staticClass:" is-size-6 has-text-success has-text-weight-bold"},[t._v(" Import success, "+t._s(t.frameworkSize)+" competencies ready to edit. ")]):i("span",{staticClass:" is-size-6 has-text-success has-text-weight-bold"},[t._v(" Import success, concepts ready to edit. ")]),i("br"),i("br")]):t._e(),"light"===t.importTransition&&"text"!==t.importType?i("p",{staticClass:"is-size-6"},[i("span",{staticClass:"has-text-success has-text-weight-bold"},[t._v(" Your import is complete! ")]),i("br"),i("br")]):t._e()]),t.showImportActions?i("div",{staticClass:"column is-12 import-feedback"}):t._e()])])])]),i("div",{staticClass:"column is-12 import-bottom-flex"},[i("div",{staticClass:"section"},[i("div",{staticClass:"container"},[!t.importFramework||t.importFramework&&"text"===t.importType?i("ImportTabs",{attrs:{caseDocs:t.caseDocs,csvRelationFile:t.csvRelationFile,csvRelationColumns:t.csvRelationColumns,importCsvColumnSource:t.importCsvColumnSource,importCsvColumnRelationType:t.importCsvColumnRelationType,importCsvColumnTarget:t.importCsvColumnTarget,csvColumns:t.csvColumns},on:{analyzeCsvRelation:function(e){return t.analyzeCsvRelation(e)},importCase:function(e){return t.handleImportFromTabs(e)},deleteObject:t.deleteObject}}):t._e(),"detail"===t.importTransition?i("ImportDetails",{attrs:{detailsDetected:t.detailsDetected},on:{deleteObject:t.deleteObject}}):t._e(),t.importFramework&&"preview"===t.importTransition?i("div",{staticClass:"import-preview"},[t.hierarchyIsdoneLoading?t._e():i("div",{staticClass:"section"},[t._m(1)]),i(t.dynamicThing,{tag:"Component",staticClass:"framework-title",class:[{"is-hidden":!t.hierarchyIsdoneLoading},t.parentObjectClass],attrs:{obj:t.changedObj?t.changedObj:t.importFramework,repo:t.repo,profile:t.containerProfile,properties:"tertiary"},on:{editNodeEvent:t.onEditNode,doneEditingNodeEvent:t.onDoneEditingNode}}),t.importFramework&&!t.conceptMode?i("Hierarchy",{class:{"is-hidden":!t.hierarchyIsdoneLoading},attrs:{view:"importPreview",container:t.importFramework,containerType:"Framework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",profile:t.hierarchyProfile,viewOnly:!1,isDraggable:!0,edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",repo:t.repo,newFramework:!0,properties:"tertiary"},on:{doneLoadingNodes:t.handleDoneLoading,searchThings:function(e){return t.handleSearch(e)},editMultipleEvent:t.onEditMultiple,selectedArray:t.selectedArrayEvent,deleteObject:t.deleteObject,exportObject:t.exportObject}}):t._e(),t.importFramework&&t.conceptMode?i("ConceptHierarchy",{class:{"is-hidden":!t.hierarchyIsdoneLoading},attrs:{view:"import",container:t.importFramework,containerType:"ConceptScheme",viewOnly:!1,isDraggable:!0,repo:t.repo,newFramework:!0,profile:t.ctdlAsnConceptProfile,properties:"tertiary"},on:{doneLoadingNodes:t.handleDoneLoading,searchThings:function(e){return t.handleSearch(e)},editMultipleEvent:t.onEditMultiple,selectedArray:t.selectedArrayEvent,deleteObject:t.deleteObject}}):t._e()],1):t.importFramework&&"light"===t.importTransition?i("div",{staticClass:"import-light"},[i(t.dynamicThing,{tag:"Component",staticClass:"framework-title",class:t.parentObjectClass,attrs:{editingNode:t.editingNode,obj:t.changedObj?t.changedObj:t.importFramework,parentNotEditable:!0,profile:t.containerProfile,properties:"tertiary"},on:{doneEditingNodeEvent:t.onDoneEditingNode}}),t.importFramework&&!t.conceptMode?i("Hierarchy",{attrs:{view:"importLight",container:t.importFramework,containerType:"Framework",containerNodeProperty:"competency",containerEdgeProperty:"relation",nodeType:"EcCompetency",profile:t.hierarchyProfile,editable:!1,viewOnly:!0,edgeType:"EcAlignment",edgeRelationProperty:"relationType",edgeRelationLiteral:"narrows",edgeSourceProperty:"source",edgeTargetProperty:"target",repo:t.repo,newFramework:!0,properties:"tertiary"},on:{deleteObject:t.deleteObject,exportObject:t.exportObject}}):t._e(),t.importFramework&&t.conceptMode?i("ConceptHierarchy",{class:{"is-hidden":!t.hierarchyIsdoneLoading},attrs:{view:"import",container:t.importFramework,containerType:"ConceptScheme",viewOnly:!0,repo:t.repo,newFramework:!0,profile:t.ctdlAsnConceptProfile,properties:"tertiary"},on:{selectedArray:t.selectedArrayEvent,deleteObject:t.deleteObject}}):t._e()],1):t._e()],1)])])])])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"is-size-6"},[t._v(" If your framework is not detected by CaSS or not imported properly, let us know at "),i("a",{attrs:{href:"mailto:cass@eduworks.com?subject=File+to+Improve+CaSS+Importer"}},[t._v("cass@eduworks.com")]),t._v(" and we will look into the inquiry and provide a response. ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"processing-list"},[i("li"),i("li"),i("ul",[i("li"),i("li"),i("li")]),i("li"),i("li"),i("ul",[i("li"),i("li")])])}],s=(i("a4d3"),i("e01a"),i("99af"),i("c975"),i("a434"),i("b0c0"),i("d3b7"),i("ac1f"),i("8a79"),i("5319"),i("841c"),i("498a"),i("ddb0"),i("b047")),a=i.n(s),n=i("c643"),c=i("872c"),p=i("6ffa4"),m=i("1102"),l=i("f188"),d=i("dbb9"),u=i("b908"),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",attrs:{id:"import-bottom-section"}},[!t.importFramework||t.importFramework&&"text"===t.importType?i("div",{staticClass:"section is-large"},[i("div",{staticClass:"tile is-vertical has-background-light"},[i("div",{staticClass:"section is-medium"},[i("div",{staticClass:"columns is-mobile"},[i("div",{staticClass:"column"},[i("div",{staticClass:"import-tab",class:{"is-active-tab":"file"===t.importType}},[i("a",{on:{click:function(e){return t.$store.commit("app/importType","file")}}},[i("i",{staticClass:"fa fa-2x fa-file has-text-centered is-block",attrs:{"aria-hidden":"true"}}),i("div",{staticClass:"is-hidden-mobile is-block has-text-centered"},[t._v(" File Import ")])])])]),t.conceptMode?t._e():i("div",{staticClass:"column"},[i("div",{staticClass:"import-tab",class:{"is-active-tab":"server"===t.importType}},[i("a",{on:{click:function(e){return t.$store.commit("app/importType","server")}}},[i("i",{staticClass:"fa fa-2x fa-server is-block has-text-centered",attrs:{"aria-hidden":"true"}}),i("div",{staticClass:"is-hidden-mobile is-block has-text-centered"},[t._v(" Remote Server ")])])])]),t.conceptMode?t._e():i("div",{staticClass:"column"},[i("div",{staticClass:"import-tab",class:{"is-active-tab":"text"===t.importType}},[i("a",{on:{click:function(e){return t.$store.commit("app/importType","text")}}},[i("i",{staticClass:"fa fa-2x fa-paste has-text-centered is-block",attrs:{"aria-hidden":"true"}}),i("div",{staticClass:"is-hidden-mobile is-block has-text-centered"},[t._v(" Paste Text ")])])])]),t.conceptMode?t._e():i("div",{staticClass:"column"},[i("div",{staticClass:"import-tab",class:{"is-active-tab":"url"===t.importType}},[i("a",{on:{click:function(e){return t.$store.commit("app/importType","url")}}},[i("i",{staticClass:"fa fa-link has-text-centered is-block fa-2x",attrs:{"aria-hidden":"true"}}),i("div",{staticClass:"is-hidden-mobile is-block has-text-centered"},[t._v(" URL Source ")])])])])]),"file"===t.importType?i("div",{staticClass:"columns is-centered"},[i("div",{staticClass:"column is-narrow"},[t.conceptMode?t._e():i("div",{staticClass:"button is-outlined is-warning is-small",on:{click:function(e){return t.showImportModal("pdf")}}},[t._m(0),i("span",[t._v("PDF")])])]),i("div",{staticClass:"column is-narrow"},[t.conceptMode?t._e():i("div",{staticClass:"button is-outlined is-warning is-small",on:{click:function(e){return t.showImportModal("docx")}}},[t._m(1),i("span",[t._v("DOCX/WORD")])])]),i("div",{staticClass:"column is-narrow"},[i("div",{staticClass:"button is-outlined is-success is-small",on:{click:function(e){return t.showImportModal("csv")}}},[t._m(2),i("span",[t._v("CSV")])])]),i("div",{staticClass:"column is-narrow"},[t.conceptMode?t._e():i("div",{staticClass:"button is-outlined is-success is-small",on:{click:function(e){return t.showImportModal("xml")}}},[t._m(3),i("span",[t._v("XML")])])]),i("div",{staticClass:"column is-narrow"},[i("div",{staticClass:"button is-outlined is-success is-small",on:{click:function(e){return t.showImportModal("json")}}},[t._m(4),i("span",[t._v("JSON")])])]),i("div",{staticClass:"column is-narrow"},[t.conceptMode?t._e():i("div",{staticClass:"button is-outlined is-success is-small",on:{click:function(e){return t.showImportModal("html")}}},[t._m(5),i("span",[t._v("HTML")])])])]):t._e(),"file"==t.importType?i("div",{staticClass:"has-dashed-border columns is-vcentered has-text-centered",attrs:{id:"drop-area"}},["upload"===t.importTransition?i("drag-and-drop",{staticClass:"column is-12",on:{clearFiles:t.clearFiles}}):"process"!==t.importTransition&&"info"!==t.importTransition||0!==t.importErrors.length?t.importErrors.length>0?i("div",{staticClass:"column has-text-danger"},[i("ul",[t._l(t.importErrors,(function(e,o){return i("li",{key:o,staticClass:"is-size-6"},[i("span",{},[i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-times"})]),t._v(" "+t._s(e)+" ")])])})),i("li")],2),i("div",{staticClass:"section"},[i("div",{staticClass:"buttons is-centered"},[i("div",{staticClass:"button is-primary",on:{click:function(e){return t.resetImport()}}},[i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-redo"})]),i("span",[t._v("start over")])])])])]):t._e():i("div",{staticClass:"column"},[i("div",{staticClass:"section has-text-centered"},["process"===t.importTransition?i("span",{staticClass:"icon is-large"},[i("i",{staticClass:"fa fa-spinner fa-pulse fa-2x"})]):t._e()]),i("div",{staticClass:"section"},[i("p",{staticClass:"is-size-6"},[t._v(" "+t._s(t.importStatus)+" ")])])])],1):t._e(),"csv"==t.importFileType&&"file"==t.importType?i("div",{staticClass:"section csv-input"},[t._l(t.csvImportDetails,(function(e){return i("div",{key:e,staticClass:"field"},[i("label",{staticClass:"label"},[t._v(" "+t._s(e.label)+" ")]),"string"===e.type?i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"input",domProps:{value:e.value},on:{input:function(i){i.target.composing||t.$set(e,"value",i.target.value)}}})]):"column"===e.type?i("div",{staticClass:"control"},[i("div",{staticClass:"select is-smal"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],on:{change:function(i){var o=Array.prototype.filter.call(i.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"value",i.target.multiple?o:o[0])}}},[i("option",{attrs:{value:"",selected:""}},[t._v(" N/A ")]),t._l(t.csvColumns,(function(e,o){return i("option",{key:o,domProps:{value:e}},[t._v(" "+t._s(e.name)+" ")])}))],2)])]):"file"===e.type?i("div",{staticClass:"file is-primary"},[i("label",{staticClass:"file-label"},[i("input",{staticClass:"file-input",attrs:{type:"file",name:"relation-file"},on:{change:function(e){return t.$emit("analyzeCsvRelation",e)}}}),t._m(6,!0)])]):t._e()])})),t.csvRelationFile?t._l(t.csvRelationDetails,(function(e){return i("div",{key:e,staticClass:"field"},[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v(" "+t._s(e.label)+" ")]),i("div",{staticClass:"select is-small"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],on:{change:function(i){var o=Array.prototype.filter.call(i.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"value",i.target.multiple?o:o[0])}}},[i("option",{attrs:{value:"",selected:""}},[t._v(" n/a ")]),t._l(t.csvRelationColumns,(function(e,o){return i("option",{key:o,domProps:{value:e}},[t._v(" "+t._s(e.name)+" ")])}))],2)])])])})):t._e()],2):"medbiq"==t.importFileType&&"file"==t.importType?i("div",t._l(t.medbiqDetails,(function(e){return i("div",{key:e,staticClass:"field"},[i("label",{staticClass:"label"},[t._v(" "+t._s(e.label)+" ")]),i("div",{staticClass:"control"},["string"===e.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"input",domProps:{value:e.value},on:{input:function(i){i.target.composing||t.$set(e,"value",i.target.value)}}}):t._e()])])})),0):t._e(),"file"===t.importType&&"info"===t.importTransition?i("div",{staticClass:"buttons is-right"},[t.importFile&&"file"===t.importType&&"pdf"!==t.importFileType?i("div",{staticClass:"button is-pulled-right is-outlined is-dark",on:{click:t.cancelImport}},[t._m(7),i("span",[t._v(" Cancel ")])]):t._e(),t.importFile&&"file"===t.importType&&"pdf"!==t.importFileType?i("div",{staticClass:"button is-pulled-right is-outlined is-primary",on:{click:t.prepareToImportNonPdf}},[t._m(8),i("span",[t._v(" Import ")])]):t._e()]):t._e(),"server"==t.importType?i("div",{staticClass:"section remote-server"},[i("h3",{staticClass:"title is-size-3 has-text-weight-medium"},[t._v(" Import from remote server ")]),"upload"===t.importTransition?[t._l(t.serverDetails,(function(e){return i("div",{key:e,staticClass:"field"},[i("label",{staticClass:"label"},[t._v(" "+t._s(e.label)+" ")]),i("div",{staticClass:"field is-grouped"},[i("div",{staticClass:"control is-expanded"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.importServerUrl,expression:"importServerUrl"}],staticClass:"input",attrs:{type:"url"},domProps:{value:t.importServerUrl},on:{input:function(e){e.target.composing||(t.importServerUrl=e.target.value)}}})]),i("div",{staticClass:"control"},[i("div",{staticClass:"button is-pulled-right is-outlined is-primary",on:{click:function(e){return t.$store.commit("app/importTransition","connectToServer")}}},[t._m(9,!0),i("span",[t._v(" connect ")])])])])])})),i("div",{staticClass:"columns is-multiline"},[t._m(10),i("div",{staticClass:"column is-12"},[i("div",{staticClass:"button is-dark is-small",on:{click:function(e){t.importServerUrl="https://opensalt.net"}}},[t._v(" OpenSalt.net ")])])])]:t._e(),"connectToServer"===t.importTransition?i("div",{staticClass:"section has-text-centered"},[t._m(11)]):"process"!==t.importTransition&&"info"!==t.importTransition||0!==t.importErrors.length?t.importErrors.length>0?i("div",{staticClass:"column has-text-danger"},[i("ul",[t._l(t.importErrors,(function(e,o){return i("li",{key:o,staticClass:"is-size-6"},[i("span",{},[t._m(12,!0),t._v(" "+t._s(e)+" ")])])})),i("li")],2),i("div",{staticClass:"section"},[i("div",{staticClass:"buttons is-centered"},[i("div",{staticClass:"button is-primary",on:{click:function(e){return t.resetImport()}}},[t._m(13),i("span",[t._v("start over")])])])])]):t._e():i("div",{staticClass:"column"},[i("div",{staticClass:"section has-text-centered"},["process"===t.importTransition?i("span",{staticClass:"icon is-large"},[i("i",{staticClass:"fa fa-spinner fa-pulse fa-2x"})]):t._e()]),i("div",{staticClass:"section"},[i("p",{staticClass:"is-size-6"},[t._v(" "+t._s(t.importStatus)+" ")])])]),t.caseDocs.length?i("div",{staticClass:"section"},[i("h3",{staticClass:"subtitle has-text-weight-bold is-size-4"},[t._v(" Found Frameworks ")]),t._l(t.caseDocs,(function(e){return i("div",{key:e.id,staticClass:"field is-grouped"},[e.loading||e.success||e.error?t._e():i("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"doc.checked"}],staticClass:"is-checkradio is-small",attrs:{type:"checkbox",id:"check"+e.id,name:"check"+e.id},domProps:{checked:e.checked,checked:Array.isArray(e.checked)?t._i(e.checked,null)>-1:e.checked},on:{change:function(i){var o=e.checked,r=i.target,s=!!r.checked;if(Array.isArray(o)){var a=null,n=t._i(o,a);r.checked?n<0&&t.$set(e,"checked",o.concat([a])):n>-1&&t.$set(e,"checked",o.slice(0,n).concat(o.slice(n+1)))}else t.$set(e,"checked",s)}}}),i("label",{staticClass:"label",attrs:{for:"check"+e.id}},[t._v(t._s(e.name))]),i("span",{staticClass:"icon is-pulled-right"},[e.loading?i("i",{staticClass:"fa fa-spinner fa-pulse"}):e.error?i("i",{staticClass:"fa fa-exclamation-triangle"}):e.success?i("i",{staticClass:"fa fa-check"}):t._e()])])})),i("div",{staticClass:"buttons is-right"},[i("div",{staticClass:"button is-outlined is-dark",on:{click:t.cancelImport}},[t._v(" Cancel ")]),"importingCaseFrameworks"!==t.importTransition?i("div",{staticClass:"button is-outlined is-primary",on:{click:function(e){return t.importCaseDocs()}}},[t._v(" Import ")]):t._e()])],2):t._e()],2):t._e(),"text"==t.importType?i("div",{staticClass:"section"},[i("h3",{staticClass:"title is-size-3 has-text-weight-medium"},[t._v(" Import framework as text ")]),t._m(14),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.importFrameworkName,expression:"importFrameworkName"}],staticClass:"input",attrs:{placeholder:"Framework Name"},domProps:{value:t.importFrameworkName},on:{input:function(e){e.target.composing||(t.importFrameworkName=e.target.value)}}})]),i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v(" Paste Text ")]),i("div",{staticClass:"control"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.importText,expression:"importText"}],staticClass:"textarea",domProps:{value:t.importText},on:{input:function(e){e.target.composing||(t.importText=e.target.value)}}})])]),i("div",{staticClass:"field"},[i("button",{staticClass:"button is-pulled-right is-primary is-outlined",on:{click:function(e){return t.$store.commit("app/importStatus","parseText")}}},[t._v(" Import ")])])]):t._e(),"url"==t.importType?i("div",{staticClass:"section"},[i("h3",{staticClass:"title is-size-3 has-text-weight-medium"},[t._v(" Import framework from url source ")]),"importingFromUrl"===t.importTransition?i("div",{staticClass:"section has-text-centered"},[t._m(15)]):t._e(),"upload"===t.importTransition?[i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v(" Paste URL of document ")]),i("div",{staticClass:"field is-grouped"},[i("div",{staticClass:"control is-expanded"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.importUrl,expression:"importUrl"}],staticClass:"input",attrs:{type:"url"},domProps:{value:t.importUrl},on:{input:function(e){e.target.composing||(t.importUrl=e.target.value)}}})]),i("div",{staticClass:"control"},[i("div",{staticClass:"button is-outlined is-primary",on:{click:t.importFromUrl}},[t._m(16),i("span",[t._v(" Import ")])])])])]),i("div",{staticClass:"columns is-multiline"},[t._m(17),i("div",{staticClass:"column is-narrow"},[i("div",{staticClass:"button is-small is-dark",on:{click:function(e){t.importUrl="https://www.onetcenter.org/ctdlasn/graph/ce-07c257d6-9119-11e8-b852-782bcb5df6ac"}}},[t._v(" O*NET Abilities Competency Framework ")])]),i("div",{staticClass:"column is-narrow"},[i("div",{staticClass:"button is-small is-dark",on:{click:function(e){t.importUrl="https://www.onetcenter.org/ctdlasn/graph/ce-07c25f74-9119-11e8-b852-782bcb5df6ac"}}},[t._v(" O*NET Basic Skills Competency Framework ")])]),i("div",{staticClass:"column is-narrow"},[i("div",{staticClass:"button is-small is-dark",on:{click:function(e){t.importUrl="https://www.onetcenter.org/ctdlasn/graph/ce-07c264d7-9119-11e8-b852-782bcb5df6ac"}}},[t._v(" O*NET Cross-Functional Skills Competency Framework ")])]),i("div",{staticClass:"column is-narrow"},[i("div",{staticClass:"button is-small is-dark",on:{click:function(e){t.importUrl="https://www.onetcenter.org/ctdlasn/graph/ce-07c27a0f-9119-11e8-b852-782bcb5df6ac"}}},[t._v(" O*NET Knowledge Competency Framework ")])]),i("div",{staticClass:"column is-narrow"},[i("div",{staticClass:"button is-small is-dark",on:{click:function(e){t.importUrl="https://www.onetcenter.org/ctdlasn/graph/ce-9fab4187-d8e7-11e9-8250-782bcb5df6ac"}}},[t._v(" O*NET Technology Skills Competency Framework ")])])])]:"process"!==t.importTransition&&"info"!==t.importTransition||0!==t.importErrors.length?t.importErrors.length>0?i("div",{staticClass:"column has-text-danger"},[i("ul",[t._l(t.importErrors,(function(e,o){return i("li",{key:o,staticClass:"is-size-6"},[i("span",{},[t._m(18,!0),t._v(" "+t._s(e)+" ")])])})),i("li")],2),i("div",{staticClass:"section"},[i("div",{staticClass:"buttons is-centered"},[i("div",{staticClass:"button is-primary",on:{click:function(e){return t.resetImport()}}},[t._m(19),i("span",[t._v("start over")])])])])]):t._e():i("div",{staticClass:"column"},[i("div",{staticClass:"section has-text-centered"},["process"===t.importTransition?i("span",{staticClass:"icon is-large"},[i("i",{staticClass:"fa fa-spinner fa-pulse fa-2x"})]):t._e()]),i("div",{staticClass:"section"},[i("p",{staticClass:"is-size-6"},[t._v(" "+t._s(t.importStatus)+" ")])])])],2):t._e()])])]):t._e()])},f=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon",attrs:{title:"PDF files are experimentally supported. Click to learn more."}},[i("i",{staticClass:"fa fa-exclamation"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon",attrs:{title:"Word documents and Docx files are experimental. Click to learn more."}},[i("i",{staticClass:"fa fa-exclamation"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon is-pulled-right",attrs:{title:"CSV files are supported, click to learn more."}},[i("i",{staticClass:"fa fa-check"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon is-pulled-right",attrs:{title:"XML files are supported, click to learn more."}},[i("i",{staticClass:"fa fa-check"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon is-pulled-right",attrs:{title:"JSON files are supported, click to learn more."}},[i("i",{staticClass:"fa fa-check"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon is-pulled-right",attrs:{title:"html files are fully supported at this time"}},[i("i",{staticClass:"fa fa-check"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"file-cta"},[i("span",{staticClass:"file-icon"},[i("i",{staticClass:"fas fa-upload"})]),i("span",{staticClass:"file-label"},[t._v(" Choose a file… ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fas fa-times"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fas fa-upload"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fas fa-network-wired"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column is-12"},[i("h3",{staticClass:"title is-size-4"},[t._v(" Remote Server Examples: ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon is-large"},[i("i",{staticClass:"fa fa-spinner fa-pulse fa-2x"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-times"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-redo"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"field"},[i("label",{staticClass:"label"},[t._v(" Framework name ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon is-large"},[i("i",{staticClass:"fa fa-spinner fa-pulse fa-2x"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"file-icon"},[i("i",{staticClass:"fas fa-upload"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column is-12"},[i("h3",{staticClass:"title is-size-5"},[t._v(" URL Import Examples: ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-times"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-redo"})])}],v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{"is-dragged-over":t.isDraggedOver},attrs:{id:"drag-and-drop"},on:{dragenter:function(e){return e.preventDefault(),t.handleDragEnter(e)},dragleave:function(e){return e.preventDefault(),t.handleDragLeave(e)},click:function(e){return t.openFileExplorer()},dragover:function(t){t.preventDefault()},drop:function(e){return e.preventDefault(),t.addFile(e)}}},[i("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",disabled:!t.uploadDisabled},on:{change:t.fileChange}}),i("div",{staticClass:"section"},[i("div",{staticClass:"columns is-centered is-multiline"},[t._m(0),0===t.files.length?i("div",{staticClass:"column is-12"},[i("p",{staticClass:"is-size-6"},[t._v(" Drag and drop, or click to upload. ")])]):t._e(),i("div",{staticClass:"column is-12"},[i("ul",t._l(t.files,(function(e){return i("li",{key:e,staticClass:"is-size-6",staticStyle:{display:"inline","vertical-align":"middle"}},[i("span",{staticClass:"has-text-weight-medium"},[t._v(" "+t._s(e.name)+" ("+t._s(t._f("kb")(e.size))+" kb) "),i("button",{staticClass:"button is-small is-text",attrs:{title:"Remove"},on:{click:function(i){return t.removeFile(e)}}},[t._m(1,!0)])])])})),0)]),i("div",{staticClass:"column is-12"},[i("button",{staticClass:"button is-outlined is-primary is-medium",attrs:{disabled:t.uploadDisabled},on:{click:t.process}},[i("span",[t._v(" Process Files ")]),t._m(2)])])])])])},C=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"column is-12"},[i("p",{staticClass:"is-size-5"},[t._v(" Files to Upload ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-times"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon is-large"},[i("i",{staticClass:"fas fa-arrow-right"})])}],g=(i("4de4"),i("4160"),i("159b"),i("6b75"));function y(t){if(Array.isArray(t))return Object(g["a"])(t)}i("d28b"),i("a630"),i("3ca3");function w(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var k=i("06c5");function $(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function F(t){return y(t)||w(t)||Object(k["a"])(t)||$()}var T={name:"DragAndDrop",data:function(){return{files:[],isDraggedOver:!1,counter:0}},computed:{uploadDisabled:function(){return 0===this.files.length}},watch:{},filters:{kb:function(t){return Math.floor(t/1024)}},mounted:function(){this.$store.commit("app/clearImportFiles")},methods:{handleDragEnter:function(t){this.counter++,t.target.id&&"drag-and-drop"===t.target.id&&(this.isDraggedOver=!0)},handleDragLeave:function(t){this.counter--,t.target&&"drag-and-drop"===t.target.id&&0===this.counter&&(this.isDraggedOver=!1)},openFileExplorer:function(){this.uploadDisabled&&this.$refs.file.click()},fileChange:function(t){var e=this;appLog(t);var i=t.target.files;i?F(i).forEach((function(t){e.files.push(t)})):this.files=[]},addFile:function(t){var e=this,i=t.dataTransfer.files||t.target.files;i&&(F(i).forEach((function(t){e.files.push(t)})),this.isDraggedOver=!1)},removeFile:function(t){this.files=this.files.filter((function(e){return e!==t})),this.$store.commit(""),this.$emit("clearFiles")},process:function(){this.$store.commit("app/importFiles",this.files),this.$store.commit("app/importTransition","processFiles")}}},b=T,S=(i("e6c0"),i("2877")),_=Object(S["a"])(b,v,C,!1,null,null,null),I=_.exports,E={name:"ImportTabs",components:{dragAndDrop:I},props:{caseDocs:{default:function(){return[]},type:Array},csvColumns:{default:function(){return[]},type:Array},csvRelationColumns:{default:function(){return[]},type:Array},csvRelationFile:{default:null,type:File},importCsvColumnSource:{default:function(){return{}},type:Object},importCsvColumnRelationType:{default:function(){return{}},type:Object},importCsvColumnTarget:{default:function(){return{}},type:Object}},data:function(){return{csvImportDetails:{name:{label:"Name the framework",value:this.importFrameworkName,type:"string"},description:{label:"Describe the framework (optional)",value:this.importFrameworkDescription,type:"string"},nameColumn:{label:"Select the Name column",value:this.$store.getters["app/importNameColumn"],type:"column"},descriptionColumn:{label:"Select the Description column (optional)",value:this.$store.getters["app/importDescriptionColumn"],type:"column"},scopeColumn:{label:"Select the Scope column (optional)",value:this.$store.getters["app/importScopeColumn"],type:"column"},idColumn:{label:"Select the ID column (optional). If chosen, this should be a URL from another CaSS system or a non-numeric ID",value:this.$store.getters["app/importIdColumn"],type:"column"},relationFile:{label:'Select a relation file (optional).\n                                The relation source/target must be in the\n                                form of ID or Name, and the relation types\n                                should be "requires", "desires", "narrows",\n                                "isEnabledBy", "isRelatedTo", or "isEquivalentTo',value:"",type:"file"}},csvRelationDetails:{sourceColumn:{label:"Select the Source column",type:"column",value:this.$store.getters["app/importSourceColumn"],array:this.importCsvColumnSource},relationColumn:{label:"Select the Relation Type column.",type:"column",value:this.$store.getters["app/importRelationColumn"],array:this.importColumnRelationType},targetColumn:{label:"Select the Target column.",type:"column",value:this.$store.getters["app/importTargetColumn"],array:this.importColumnTarget}},medbiqDetails:{name:{label:"Name the framework",value:this.importFrameworkName,type:"string"},description:{label:"Describe the framework (optional)",value:this.importFrameworkDescription,type:"string"}},serverDetails:[{label:"Paste URL endpoint of server"}]}},watch:{importNameColumn:function(){this.csvImportDetails.nameColumn.value=this.importNameColumn},importDescriptionColumn:function(){this.csvImportDetails.descriptionColumn.value=this.importDescriptionColumn},importScopeColumn:function(){this.csvImportDetails.scopeColumn.value=this.importScopeColumn},importIdColumn:function(){this.csvImportDetails.idColumn.value=this.importIdColumn},importSourceColumn:function(){this.csvRelationDetails.sourceColumn.value=this.importSourceColumn},importRelationColumn:function(){this.csvRelationDetails.relationColumn.value=this.importRelationColumn},importTargetColumn:function(){this.csvRelationDetails.targetColumn.value=this.importTargetColumn},importFrameworkName:function(){"medbiq"===this.importFileType?this.medbiqDetails.name.value=this.importFrameworkName:"csv"===this.importFileType&&(this.csvImportDetails.name.value=this.importFrameworkName)},importFrameworkDescription:function(){"medbiq"===this.importFileType?this.medbiqDetails.description.value=this.importFrameworkDescription:"csv"===this.importFileType&&(this.csvImportDetails.description.value=this.importFrameworkDescription)}},methods:{importFromUrl:function(){this.$store.commit("app/importStatus","importFromUrl"),this.$store.commit("app/importTransition","importingFromUrl")},importCaseDocs:function(){this.$emit("importCase",this.caseDocs),this.$store.commit("app/importTransition","importingCaseFrameworks")},showImportModal:function(t){var e={component:"SupportedImportDetails",documentContent:t};this.$store.commit("app/showModal",e)},prepareToImportNonPdf:function(){"csv"===this.importFileType?(this.$store.commit("app/importFrameworkName",this.csvImportDetails.name.value),this.$store.commit("app/importFrameworkDescription",this.csvImportDetails.description.value),this.$store.commit("app/importNameColumn",this.csvImportDetails.nameColumn.value),this.$store.commit("app/importDescriptionColumn",this.csvImportDetails.descriptionColumn.value),this.$store.commit("app/importScopeColumn",this.csvImportDetails.scopeColumn.value),this.$store.commit("app/importIdColumn",this.csvImportDetails.idColumn.value),this.$store.commit("app/importSourceColumn",this.csvRelationDetails.sourceColumn.value),this.$store.commit("app/importTargetColumn",this.csvRelationDetails.targetColumn.value),this.$store.commit("app/importRelationColumn",this.csvRelationDetails.relationColumn.value),this.$store.commit("app/importTransition","uploadCsv")):"medbiq"===this.importFileType?(this.$store.commit("app/importFrameworkName",this.csvImportDetails.name.value),this.$store.commit("app/importFrameworkDescription",this.csvImportDetails.description.value),this.$store.commit("app/importTransition","uploadMedbiq")):"pdf"!==this.importFileType&&this.$store.commit("app/importTransition","uploadOtherNonPdf")},importFromFile:function(){this.$store.commit("app/importType","file"),this.$store.commit("app/importFramework",null),this.$store.commit("app/importTransition","upload")},clearFiles:function(){this.$store.commit("app/clearImportFiles")},resetImport:function(){this.$store.commit("app/resetImport")},cancelImport:function(){this.$emit("deleteObject",this.importFramework),this.resetImport()}},computed:{conceptMode:function(){return this.$store.getters["editor/conceptMode"]},importText:{get:function(){return this.$store.getters["app/importText"]},set:function(t){this.$store.commit("app/importText",t)}},importServerUrl:{get:function(){return this.$store.getters["app/importServerUrl"]},set:function(t){this.$store.commit("app/importServerUrl",t)}},importUrl:{get:function(){return this.$store.getters["app/importUrl"]},set:function(t){this.$store.commit("app/importUrl",t)}},importErrors:function(){return this.$store.getters["app/importErrors"]},importFile:function(){return this.$store.getters["app/importFiles"]},importTransition:function(){return this.$store.getters["app/importTransition"]},importType:function(){return this.$store.getters["app/importType"]},importFileType:function(){return this.$store.getters["app/importFileType"]},importFramework:function(){return this.$store.getters["app/importFramework"]},importFrameworkName:{get:function(){return this.$store.getters["app/importFrameworkName"]},set:function(t){this.$store.commit("app/importFrameworkName",t)}},importFrameworkDescription:function(){return this.$store.getters["app/importFrameworkDescription"]},importStatus:function(){return this.$store.getters["app/importStatus"]},importNameColumn:function(){return this.$store.getters["app/importNameColumn"]},importDescriptionColumn:function(){return this.$store.getters["app/importDescriptionColumn"]},importScopeColumn:function(){return this.$store.getters["app/importScopeColumn"]},importIdColumn:function(){return this.$store.getters["app/importIdColumn"]},importSourceColumn:function(){return this.$store.getters["app/importSourceColumn"]},importRelationColumn:function(){return this.$store.getters["app/importRelationColumn"]},importTargetColumn:function(){return this.$store.getters["app/importTargetColumn"]}}},D=E,x=(i("81d7"),Object(S["a"])(D,h,f,!1,null,null,null)),O=x.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.importFramework&&"detail"===t.importTransition?i("div",{staticClass:"section import-details"},[i("div",{staticClass:"import-details__section"},[i("h3",{staticClass:"subtitle is-size-3 has-text-weight-normal"},[t._v(" The following details were detected. ")]),i("p",{staticClass:"is-size-6 has-text-weight-light"},[t._v(" If these details don't look correct, please verify your file is correct and import again. ")]),i("ul",{staticClass:"is-size-6 detected-import-details"},[t.detailsDetected.columns>0?i("li",[t._m(0),t._v(" CaSS detected "),i("b",[t._v(t._s(t.detailsDetected.columns))]),t._v(" columns ")]):t._e(),t.detailsDetected.rows>0?i("li",[t._m(1),t._v(" CaSS detected "),i("b",[t._v(t._s(t.detailsDetected.rows))]),t._v(" rows ")]):t._e(),i("li",[t._m(2),t._v(" CaSS detected "),i("b",[t._v(t._s(t.detailsDetected.competencies))]),t._v(" competencies in the imported framework ")]),i("li",[t._m(3),t._v(" CaSS detected a "),i("b",[t._v(t._s(t.detailsDetected.fileType))]),t._v(" file type ")]),t.detailsDetected.headers?i("li",[t._m(4),i("b",[t._v("Header rows detected")])]):t._e()]),i("div",{staticClass:"buttons is-right"},[i("div",{staticClass:" button is-light is-small is-pulled-right is-dark is-outlined",on:{click:t.cancelImport}},[i("span",[t._v(" Cancel ")]),t._m(5)]),"detail"===t.importTransition?i("div",{staticClass:"button is-small is-primary is-outlined",on:{click:function(e){return t.$store.commit("app/importTransition","preview")}}},[i("span",[t._v(" Accept Details & Review ")]),t._m(6)]):t._e()])])]):t._e()},N=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon has-text-success"},[i("i",{staticClass:"fa fa-check-circle"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon has-text-success"},[i("i",{staticClass:"fa fa-check-circle"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon has-text-success"},[i("i",{staticClass:"fa fa-check-circle"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon has-text-success"},[i("i",{staticClass:"fa fa-check-circle"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon has-text-success"},[i("i",{staticClass:"fa fa-check-circle"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-times-circle"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"icon is-small"},[i("i",{staticClass:"fas fa-arrow-right"})])}],j={name:"ImportDetails",props:{detailsDetected:Object},components:{},computed:{importErrors:function(){return this.$store.getters["app/importErrors"]},importFile:function(){return this.$store.getters["app/importFiles"]},importTransition:function(){return this.$store.getters["app/importTransition"]},importType:function(){return this.$store.getters["app/importType"]},importFileType:function(){return this.$store.getters["app/importFileType"]},importFramework:function(){return this.$store.getters["app/importFramework"]},importStatus:function(){return this.$store.getters["app/importStatus"]}},methods:{cancelImport:function(){this.$emit("deleteObject",this.importFramework),this.$store.dispatch("app/clearImport")}}},R=j,M=Object(S["a"])(R,P,N,!1,null,null,null),L=M.exports,A=i("25d8"),q=i("b1ab"),z=i("1f27"),U={name:"Import",mixins:[c["a"],p["a"],m["a"],l["a"],z["a"],q["a"]],components:{Hierarchy:n["default"],Thing:d["default"],ThingEditing:u["default"],ImportTabs:O,ImportDetails:L,ConceptHierarchy:A["default"]},data:function(){return{parentObjectClass:"parent-object",editingNode:!1,hierarchyIsdoneLoading:!1,frameworkBusy:!0,detailsDetected:{rows:0,columns:0,headers:!1,competencies:0,format:"Department of Labor",fileType:""},repo:window.repo,competencyCount:0,csvColumns:[],csvRelationFile:null,csvRelationColumns:[],relationCount:0,caseDocs:[],caseCancel:!1,selectedArray:[],frameworkExportOptions:[{name:"Achievement Standards Network (RDF+JSON)",value:"asn"},{name:"CASS (JSON-LD)",value:"jsonld"},{name:"CASS (RDF Quads)",value:"rdfQuads"},{name:"CASS (RDF+JSON)",value:"rdfJson"},{name:"CASS (RDF+XML)",value:"rdfXml"},{name:"CASS (Turtle)",value:"turtle"},{name:"Credential Engine ASN (JSON-LD)",value:"ctdlasnJsonld"},{name:"Credential Engine ASN (CSV)",value:"ctdlasnCsv"},{name:"Table (CSV)",value:"csv"},{name:"IMS Global CASE (JSON)",value:"case"}],changedObj:null}},computed:{queryParams:function(){return this.$store.getters["editor/queryParams"]},conceptMode:function(){return this.$store.getters["editor/conceptMode"]},showImportActions:function(){return"detail"===this.importTransition||"preview"===this.importTransition||"light"===this.importTransition},importServerUrl:function(){return this.$store.getters["app/importServerUrl"]},importUrl:function(){return this.$store.getters["app/importUrl"]},importErrors:function(){return this.$store.getters["app/importErrors"]},importFile:function(){return this.$store.getters["app/importFiles"]},importTransition:function(){return this.$store.getters["app/importTransition"]},importType:function(){return this.$store.getters["app/importType"]},importFileType:function(){return this.$store.getters["app/importFileType"]},importFramework:function(){return this.$store.getters["app/importFramework"]},importFrameworkName:{get:function(){return this.$store.getters["app/importFrameworkName"]},set:function(t){return this.$store.commit("app/importFrameworkName",t)}},importFrameworkDescription:function(){return this.$store.getters["app/importFrameworkDescription"]},dynamicThing:function(){return this.editingNode?"ThingEditing":"Thing"},frameworkSize:function(){return this.conceptMode?null:this.importFramework&&this.importFramework.competency?this.importFramework.competency.length:0},isT3Import:function(){return"pdf"===this.importFileType},importStatus:function(){return this.$store.getters["app/importStatus"]},importCsvColumnName:{get:function(){return this.$store.getters["app/importNameColumn"]},set:function(t){this.$store.commit("app/importNameColumn",t)}},importCsvColumnDescription:{get:function(){return this.$store.getters["app/importDescriptionColumn"]},set:function(t){this.$store.commit("app/importDescriptionColumn",t)}},importCsvColumnScope:{get:function(){return this.$store.getters["app/importScopeColumn"]},set:function(t){this.$store.commit("app/importScopeColumn",t)}},importCsvColumnId:{get:function(){return this.$store.getters["app/importIdColumn"]},set:function(t){this.$store.commit("app/importIdColumn",t)}},importCsvColumnSource:{get:function(){return this.$store.getters["app/importSourceColumn"]},set:function(t){this.$store.commit("app/importSourceColumn",t)}},importCsvColumnRelationType:{get:function(){return this.$store.getters["app/importRelationColumn"]},set:function(t){this.$store.commit("app/importRelationColumn",t)}},importCsvColumnTarget:{get:function(){return this.$store.getters["app/importTargetColumn"]},set:function(t){this.$store.commit("app/importTargetColumn",t)}},firstImport:{get:function(){return this.$store.getters["app/firstImport"]},set:function(t){this.$store.commit("app/firstImport",t)}},text:function(){return this.$store.getters["app/importText"]},containerProfile:function(){return this.conceptMode?ctdlAsnConceptSchemeProfile:this.isT3Import?this.t3FrameworkProfile:"true"===this.queryParams.ceasnDataFields?this.ctdlAsnFrameworkProfile:this.t3FrameworkProfile},hierarchyProfile:function(){return this.conceptMode?ctdlAsnConceptProfile:this.isT3Import?this.t3CompetencyProfile:"true"===this.queryParams.ceasnDataFields?this.ctdlAsnFrameworkProfile:this.t3CompetencyProfile}},watch:{importStatus:function(t){"connectToServer"===t?this.connectToServer():"importFromUrl"===t?this.importFromUrl():"parseText"===t&&this.parseText()},importType:function(t){this.caseDocs=[],this.clearImport()},importTransition:function(t){if("processFiles"===t)return this.uploadFiles(this.importFile);"uploadCsv"===t||"uploadMedbiq"===t||"uploadOtherNonPdf"===t?this.importFromFile():"connectToServer"===t&&this.connectToServer()},text:function(t,e){var i=this;TabStructuredImport.importCompetencies(t,this.queryParams.newObjectEndpoint?this.queryParams.newObjectEndpoint:this.repo.selectedServer,EcIdentityManager.ids[0],(function(t,e){i.$store.commit("app/importTransition","light");var o=t.length+" competencies and "+e.length+" relations.";i.$store.commit("app/importStatus",o);var r=new EcFramework;i.$store.commit("app/importFramework",null);for(var s=0;s<t.length;s++)EcRepository.cache[t[s].shortId()]=t[s],r.addCompetency(t[s].shortId());for(s=0;s<e.length;s++)EcRepository.cache[e[s].shortId()]=e[s],r.addRelation(e[s].shortId());i.$nextTick((function(){i.$store.commit("app/importFramework",r),i.$store.commit("editor/framework",r)}))}),(function(t){i.$store.commit("app/importStatus",t)}),appError,this.repo,!1)},importFramework:function(){this.importFramework&&!this.conceptMode&&0===this.frameworkSize&&(this.hierarchyIsdoneLoading=!0)}},created:function(){this.$store.commit("editor/framework",null),this.spitEvent("viewChanged")},methods:{selectedArrayEvent:function(t){this.selectedArray=t},onEditMultiple:function(){this.showEditMultiple=!0;var t={profile:this.hierarchyProfile,selectedCompetencies:this.selectedArray,component:"MultiEdit"};this.$store.commit("app/showModal",t)},handleSearch:function(t){this.$store.commit("app/showModal",t)},handleImportFromTabs:function(t){this.caseDocs=t,this.importCase()},onEditNode:function(){this.editingNode=!0},onDoneEditingNode:function(){this.changedObj=EcRepository.getBlocking(this.importFramework.shortId()),this.editingNode=!1},handleDoneLoading:function(){appLog("done loading"),this.hierarchyIsdoneLoading=!0},showModal:function(t,e){var i=this,o={};"export"===t?o={type:t,selectedExportOption:"",title:"Export framework",exportOptions:this.frameworkExportOptions,text:"Select a file format to export your framework. Files download locally.",onConfirm:function(t){return i.exportObject(t)}}:"duplicate"===t?o={type:t,title:"Duplicate framework",text:"A framework has already been imported under the name "+e.name+". Do you want to overwrite it?",options:["Overwrite framework","Save import as a new framework"],currentName:e.name,onConfirm:function(t){return i.savePdfImport(e,t)},onCancel:function(){return i.clearImport()}}:"duplicateOverwriteOnly"===t&&(o={type:t,title:"Duplicate framework",text:(e[0].name?"The framework "+e[0].name:"This framework")+" has already been imported. If you're a framework admin you can overwrite it. Do you want to overwrite it?",onConfirm:function(){return"url"===i.importType?i.importJsonLd(e[0]):i.continueCaseImport(e)},onCancel:function(){return"url"===i.importType?i.clearImport():i.importCase(e)}}),this.$modal.show(o)},exportObject:function(t){var e;e=!1===EcRepository.shouldTryUrl(this.importFramework.id)?EcCrypto.md5(this.importFramework.id):this.importFramework.getGuid();var i=this.repo.selectedServer+"data/"+e;"asn"===t?this.exportAsn(i):"jsonld"===t?this.exportJsonld(i):"rdfQuads"===t?this.exportRdfQuads(i):"rdfJson"===t?this.exportRdfJson(i):"rdfXml"===t?this.exportRdfXml(i):"turtle"===t?this.exportTurtle(i):"ctdlasnJsonld"===t?this.exportCtdlasnJsonld(i):"ctdlasnCsv"===t?this.exportCtdlasnCsv(i):"csv"===t?this.exportCsv():"case"===t&&this.exportCasePackages(e)},unsupportedFile:function(t){this.$store.commit("app/importFileType",t);var e="File type "+fileType+" is unsupported in this workflow";this.$store.commit("app/addImportError",e),me.$store.commit("app/importTransition","process")},importSuccess:function(){if(this.conceptMode){var t="Taxonomy";"true"===this.queryParams.ceasnDataFields&&(t="Concept Scheme"),this.$store.commit("app/importStatus",t+" Imported."),this.$store.commit("app/importTransition","preview")}else{var e="Competency detected";this.$store.commit("app/importStatus",e),this.isT3Import?this.$store.commit("app/importTransition","detail"):this.$store.commit("app/importTransition","preview")}},importDetailsAccept:function(){this.$store.commit("app/importStatus","Edit and approve"),this.$store.commit("app/importTransition","preview")},importPreviewAccept:function(){this.$store.commit("app/importStatus","Import Complete!"),this.$store.commit("app/importTransition","light")},clearImport:function(){this.$store.commit("app/importFramework",null),this.$store.commit("app/clearImportFiles"),this.$store.commit("app/clearImportErrors"),this.$store.commit("app/importTransition","upload"),this.$store.commit("app/importStatus",""),this.$store.commit("app/importFeedback",""),this.$store.commit("app/importFileType","")},uploadFiles:function(){this.fileChange(this.importFile)},fileChange:function(t){appLog("file change",t),this.$store.commit("app/clearImportErrors"),this.$store.commit("app/importTransition","process"),this.$store.commit("app/firstImport",!0),this.analyzeImportFile()},analyzeImportFile:function(){var t,e=this,i=this.importFile[0];if(appLog("file is",i),i.name.endsWith(".csv"))this.conceptMode?CTDLASNCSVConceptImport.analyzeFile(i,(function(i,o){e.$store.commit("app/importFileType","conceptcsv");var r="taxonomies";"true"===this.queryParams.ceasnDataFields&&(r="concept schemes"),t="Import "+i+" "+r+" and "+o+" concepts.",e.$store.commit("app/importStatus",t),e.$store.commit("app/importTransition","info")}),(function(t){e.$store.commit("app/addImportError",t),e.$store.commit("app/importTransition","process")})):CTDLASNCSVImport.analyzeFile(i,(function(i,o){e.$store.commit("app/importFileType","ctdlasncsv"),t="Import "+i+" frameworks and "+o+" competencies.",e.$store.commit("app/importStatus",t),e.$store.commit("app/importTransition","info")}),(function(t){CSVImport.analyzeFile(i,(function(t){e.$store.commit("app/importFileType","csv"),e.importFrameworkName=i.name.replace(".csv","");for(var o=0;o<t[0].length;o++){var r={};r.name=t[0][o],r.index=o,e.csvColumns.push(r),-1!==r.name.toLowerCase().indexOf("name")&&(e.importCsvColumnName=r),-1!==r.name.toLowerCase().indexOf("description")&&(e.importCsvColumnDescription=r),-1!==r.name.toLowerCase().indexOf("scope")&&(e.importCsvColumnScope=r),-1!==r.name.toLowerCase().indexOf("id")&&(e.importCsvColumnId=r)}e.$store.commit("app/importStatus",(e.competencyCount=t.length-1)+" Competencies Detected."),e.$store.commit("app/importTransition","info")}),(function(t){e.$store.commit("app/addImportError",t),e.$store.commit("app/importTransition","process")}))}));else if(i.name.endsWith(".json")||i.name.endsWith(".jsonld"))this.analyzeJsonLdFramework(i,(function(t,i){var o,r,s=!1;if("ctdlasnConcept"===i)if(e.conceptMode)"true"===e.queryParams.ceasnDataFields?e.$store.commit("app/importStatus","1 Concept Scheme Detected."):e.$store.commit("app/importStatus","1 Taxonomy Detected."),e.$store.commit("app/importFileType","ctdlasnjsonld"),e.$store.commit("app/importTransition","info");else{if("true"===e.queryParams.ceasnDataFields)var a="Concept Schemes must be imported in the concept scheme editor.";else a="Taxonomies must be imported in the taxonomy editor.";s=!0,e.$store.commit("app/addImportError",a),e.$store.commit("app/importTransition","process")}else e.conceptMode?(o="Frameworks must be imported in the competency editor.",s=!0,e.$store.commit("app/addImportError",o),e.$store.commit("app/importTransition","process")):(e.$store.commit("app/importFileType","ctdlasnjsonld"),r="1 Framework and "+(EcObject.keys(t).length-1)+" Competencies Detected.",e.$store.commit("app/importStatus",r),e.$store.commit("app/importTransition","info"));if(e.competencyCount=EcObject.keys(t).length,s||"ctdlasn"!==i&&"ctdlasnConcept"!==i){if(!s){var n="Context is not CTDL-ASN";e.$store.commit("app/addImportError",n),e.$store.commit("app/importTransition","process")}}else;}),(function(t){i.name.endsWith(".json")&&!e.conceptMode?ASNImport.analyzeFile(i,(function(t){e.$store.commit("app/importFileType","asn"),e.$store.commit("app/importStatus","1 Framework and "+EcObject.keys(t).length+" Competencies Detected."),e.$store.commit("app/importTransition","info"),e.competencyCount=EcObject.keys(t).length}),(function(t){e.$store.commit("app/addImportError",t),e.$store.commit("app/importTransition","process")})):(e.$store.commit("app/addImportError",t),e.$store.commit("app/importTransition","process"))}));else if(i.name.endsWith(".xml"))this.conceptMode?(e.$store.commit("app/importTransition","process"),"true"===e.queryParams.ceasnDataFields?e.$store.commit("app/addImportError","This is not a valid file format for concept schemes"):e.$store.commit("app/addImportError","This is not a valid file format for taxonomies")):MedbiqImport.analyzeFile(i,(function(t){e.$store.commit("app/importFileType","medbiq"),e.importFrameworkName=i.name.replace(".xml",""),e.$store.commit("app/importStatus","1 Framework and "+EcObject.keys(t).length+" Competencies Detected."),e.competencyCount=EcObject.keys(t).length,e.$store.commit("app/importTransition","info")}),(function(t){e.$store.commit("app/importTransition","process"),e.$store.commit("app/addImportError",t)}));else if(i.name.endsWith(".pdf"))this.conceptMode?(e.$store.commit("app/importTransition","process"),"true"===e.queryParams.ceasnDataFields?e.$store.commit("app/addImportError","This is not a valid file format for concept schemes"):e.$store.commit("app/addImportError","This is not a valid file format for taxonomies")):(e.$store.commit("app/importFileType","pdf"),e.firstImport=!1,e.detailsDetected.fileType="pdf",e.$store.commit("app/importStatus","File selected."),e.$store.commit("app/importTransition","info"));else if(i.name.endsWith(".docx"))this.conceptMode?(e.$store.commit("app/importTransition","process"),"true"===e.queryParams.ceasnDataFields?e.$store.commit("app/addImportError","This is not a valid file format for concept schemes"):e.$store.commit("app/addImportError","This is not a valid file format for taxonomies")):(e.$store.commit("app/importFileType","pdf"),e.firstImport=!1,e.$store.commit("app/importStatus","File selected."),e.$store.commit("app/importTransition","info"));else{if(!i.name.endsWith(".html"))return e.$store.commit("app/importFileType",""),error="CaSS cannot read the file "+i.name+". Please check that the file has the correct file extension.",e.$store.commit("app/addImportError",error),void e.$store.commit("app/importTransition","process");this.conceptMode?(e.$store.commit("app/importTransition","process"),"true"===e.queryParams.ceasnDataFields?e.$store.commit("app/addImportError","This is not a valid file format for concept schemes"):e.$store.commit("app/addImportError","This is not a valid file format for taxonomies")):(e.$store.commit("app/importFileType","pdf"),e.detailsDetected.fileType="html",e.firstImport=!1,e.$store.commit("app/importStatus","File selected."),e.$store.commit("app/importTransition","info"))}e.firstImport||e.importFromFile()},analyzeCsvRelation:function(t){appLog(t);var e=t.target.files||t.dataTransfer.files;e.length?this.csvRelationFile=e[0]:this.csvRelationFile=null;var i=this;CSVImport.analyzeFile(this.csvRelationFile,(function(t){for(var e=0;e<t[0].length;e++){var o={};o.name=t[0][e],o.index=e,i.csvRelationColumns.push(o),-1!==o.name.toLowerCase().indexOf("source")&&(i.importCsvColumnSource=o),-1!==o.name.toLowerCase().indexOf("origin")&&(i.importCsvColumnSource=o),-1!==o.name.toLowerCase().indexOf("type")&&(i.importCsvColumnRelationType=o),-1!==o.name.toLowerCase().indexOf("target")&&(i.importCsvColumnTarget=o),-1!==o.name.toLowerCase().indexOf("destination")&&(i.importCsvColumnTarget=o)}i.relationCount=t.length-1}),(function(t){i.$store.commit("app/importStatus",t),i.$store.commit("app/importTransition","process"),i.$store.commit("app/addImportError",t)}))},analyzeJsonLdFramework:function(t,e,i){if(null!=t)if(null!=t["name"]){var o=new FileReader;o.onload=function(t){var o=t["target"]["result"],r=JSON.parse(o);r["@graph"]?"http://credreg.net/ctdlasn/schema/context/json"===r["@context"]||"http://credreg.net/ctdl/schema/context/json"===r["@context"]||"https://credreg.net/ctdlasn/schema/context/json"===r["@context"]||"https://credreg.net/ctdl/schema/context/json"===r["@context"]?-1!==r["@graph"][0]["@type"].indexOf("Concept")?e(r["@graph"],"ctdlasnConcept"):e(r["@graph"],"ctdlasn"):e(r["@graph"],null):i("Invalid file")},o.readAsText(t,"UTF-8")}else i("Invalid file");else i("No file to analyze")},importMedbiq:function(){var t=EcIdentityManager.ids[0],e=new EcFramework;null!=t&&e.addOwner(t.ppk.toPk()),null!=this.queryParams.newObjectEndpoint&&void 0!==this.queryParams.newObjectEndpoint?e.generateShortId(null==this.queryParams.newObjectEndpoint?this.repo.selectedServer:this.queryParams.newObjectEndpoint):e.generateId(null==this.queryParams.newObjectEndpoint?this.repo.selectedServer:this.queryParams.newObjectEndpoint),e["schema:dateCreated"]=(new Date).toISOString(),appLog(this.importFrameworkName),e.setName(this.importFrameworkName),e.setDescription(this.importFrameworkDescription);var i=this;MedbiqImport.importCompetencies(null==this.queryParams.newObjectEndpoint?this.repo.selectedServer:this.queryParams.newObjectEndpoint,t,(function(t){for(var o=0;o<t.length;o++)e.addCompetency(t[o].shortId());i.repo.saveTo(e,(function(t){i.importFile.splice(0,1),i.importFile.length>0?(i.firstImport=!1,i.analyzeImportFile()):(i.$store.commit("app/importFramework",e),i.$store.commit("editor/framework",e),i.importSuccess(),i.spitEvent("importFinished",e.shortId(),"importPage"))}),(function(t){i.$store.commit("app/importStatus",t),i.$store.commit("app/importTransition","process"),i.$store.commit("app/addImportError",t)}))}),(function(t){i.$store.commit("app/importStatus",t),i.$store.commit("app/importTransition","process"),i.$store.commit("app/addImportError",t)}),(function(t){i.$store.commit("app/importStatus",t.competencies+"/"+i.competencyCount+" competencies imported.")}),i.repo)},importAsn:function(){var t=EcIdentityManager.ids[0],e=this;e.$store.commit("app/importTransition","process"),ASNImport.importCompetencies(this.repo.selectedServer,t,!0,(function(t,i){e.importFile.splice(0,1),e.importFile.length>0?(e.firstImport=!1,e.analyzeImportFile()):(e.$store.commit("app/importFramework",i),e.$store.commit("editor/framework",i),e.importSuccess(),e.spitEvent("importFinished",i.shortId(),"importPage"))}),(function(t){e.$store.commit("app/importTransition","process"),e.$store.commit("app/addImportError",t)}),(function(t){e.$store.commit("app/importStatus",t.competencies+"/"+e.competencyCount+" competencies imported.")}),e.repo)},importCtdlAsnCsv:function(){var t=null;EcIdentityManager.ids.length>0&&(t=EcIdentityManager.ids[0]);var e=this;CTDLASNCSVImport.importFrameworksAndCompetencies(e.repo,e.importFile[0],(function(t,i,o){if(!0===e.queryParams.ceasnDataFields)for(var r=0;r<t.length;r++)null!=t[r]["schema:inLanguage"]&&void 0!==t[r]["schema:inLanguage"]||(e.setDefaultLanguage(),t[r]["schema:inLanguage"]=defaultLanguage);var s=t.concat(i).concat(o);e.$store.commit("app/importStatus","Saving "+s.length+" objects."),e.repo.multiput(s,(function(){for(var i=0;i<t.length;i++)e.$store.commit("app/importFramework",t[i]),e.$store.commit("editor/framework",t[i]),e.spitEvent("importFinished",t[i].shortId(),"importPage");e.importFile.splice(0,1),e.importFile.length>0?(e.firstImport=!1,e.analyzeImportFile()):e.importSuccess()}),(function(t){e.$store.commit("app/importStatus",t),e.$store.commit("app/importTransition","process"),e.$store.commit("app/addImportError",t)}))}),(function(t){e.$store.commit("app/importStatus",t),e.$store.commit("app/importTransition","process"),e.$store.commit("app/addImportError",t)}),t)},importPdf:function(){var t=this;t.$store.commit("app/importStatus","importing framework...");var e=new FormData;e.append(t.importFile[0].name,t.importFile[0]),t.$store.commit("app/importStatus","importing file..."),EcRemote.postExpectingString("https://t3.cassproject.org/service/parse/","docx",e,(function(e){var i=null;try{i=JSON.parse(e)}catch(s){return t.$store.commit("app/importStatus",e),t.$store.commit("app/importTransition","process"),void t.$store.commit("app/addImportError",e)}if(null==i)return t.$store.commit("app/importStatus",e),t.$store.commit("app/importTransition","process"),void t.$store.commit("app/addImportError",e);var o=new UUID(3,"nil",i.name).format(),r=new EcFramework;t.$store.commit("app/importStatus","looking for existing framework..."),t.queryParams&&t.queryParams.newObjectEndpoint?r.id=t.queryParams.newObjectEndpoint+o:r.assignId(t.repo.selectedServer,o),t.repo.search('(@id:"'+r.shortId()+'") AND (@type:Framework)',(function(){}),(function(e){appLog(e),t.$store.commit("app/importStatus","looking for existing framwork..."),e.length>0?(t.$store.commit("app/importStatus","framework found..."),t.showModal("duplicate",i)):(t.$store.commit("app/importStatus","no match, saving new framework..."),t.savePdfImport(i))}),(function(e){t.$store.commit("app/importStatus",e),t.$store.commit("app/importTransition","process"),t.$store.commit("app/addImportError",e)}))}),(function(e){appLog("error here"),""===e&&(e="Server unresponsive."),t.$store.commit("app/importStatus",e),t.$store.commit("app/importTransition","process"),t.$store.commit("app/addImportError",e)})),t.$store.commit("app/importTransition","process"),t.$store.commit("app/importStatus","processing file...")},savePdfImport:function(t,e){var i=this;i.$store.commit("app/importStatus","saving file...");var o=[],r=new EcFramework,s=e||t.name;s?r.setName(s):r.setName("Unknown Name"),t.description&&""!==t.description&&r.setDescription(t.description);var a=new UUID(3,"nil",s).format();i.queryParams&&i.queryParams.newObjectEndpoint?r.id=i.queryParams.newObjectEndpoint+a:r.assignId(i.repo.selectedServer,a),r.competency=[],r.relation=[],r.level=[],r["schema:dateCreated"]=(new Date).toISOString(),o.push(r),appLog("d",t),appLog("message: ",JSON.parse(r.toJson()));var n={};if(!t.competencies)return i.$store.commit("app/importStatus","Error importing competencies."),i.$store.commit("app/importTransition","process"),void i.$store.commit("app/addImportError","Error importing competencies, no competencies found in file.");i.detailsDetected.competencies=t.competencies.length;for(var c=0;c<t.competencies.length;c++){var p=new EcCompetency;i.queryParams&&i.queryParams.newObjectEndpoint?p.id=i.queryParams.newObjectEndpoint+t.competencies[c].id:p.assignId(i.repo.selectedServer,t.competencies[c].id),n[t.competencies[c].id]=p.shortId(),null!=t.competencies[c].name?p.setName(t.competencies[c].name.trim()):p.setName("Unknown name"),t.competencies[c].name!==t.competencies[c].description&&t.competencies[c].description&&p.setDescription(t.competencies[c].description.trim()),null!=t.competencies[c]["ceasn:codedNotation"]&&(p["ceasn:codedNotation"]=t.competencies[c]["ceasn:codedNotation"]),r.addCompetency(p.shortId()),o.push(p)}for(c=0;c<t.relation.length;c++){p=new EcAlignment;i.queryParams&&i.queryParams.newObjectEndpoint?p.generateShortId(this.queryParams.newObjectEndpoint):p.assignId(i.repo.selectedServer,t.relation[c].source+"_"+t.relation[c].relationType+"_"+t.relation[c].target),p.source=n[t.relation[c].source],p.target=n[t.relation[c].target],p.relationType=t.relation[c].relationType,void 0!==p.source&&void 0!==p.target?(r.addRelation(p.shortId()),o.push(p)):appLog(JSON.parse(p.toJson()))}i.repo.multiput(o,(function(){i.$store.commit("app/importFramework",r),i.$store.commit("editor/framework",r),i.$store.commit("editor/t3Profile",!0),i.$store.commit("app/importStatus",""),i.importSuccess()}),(function(t){i.$store.commit("app/importStatus",t),i.$store.commit("app/importTransition","process"),i.$store.commit("app/addImportError",t)})),i.$store.commit("app/importTransition","process"),i.$store.commit("app/importStatus","saving import...")},importCsv:function(){var t=this.importFile[0],e=this.csvRelationFile,i=EcIdentityManager.ids[0],o=null==this.queryParams.newObjectEndpoint?this.repo.selectedServer:this.queryParams.newObjectEndpoint,r=new EcFramework;null!=i&&r.addOwner(i.ppk.toPk()),null!==this.queryParams.newObjectEndpoint&&void 0!==this.queryParams.newObjectEndpoint?r.generateShortId(o):r.generateId(o),r["schema:dateCreated"]=(new Date).toISOString(),r.setName(this.importFrameworkName),r.setDescription(this.importFrameworkDescription);var s=this;CSVImport.importCompetencies(t,o,i,this.importCsvColumnName?this.importCsvColumnName.index:-1,this.importCsvColumnDescription?this.importCsvColumnDescription.index:-1,this.importCsvColumnScope?this.importCsvColumnScope.index:-1,this.importCsvColumnId?this.importCsvColumnId.index:-1,e,this.importCsvColumnSource?this.importCsvColumnSource.index:-1,this.importCsvColumnRelationType?this.importCsvColumnRelationType.index:-1,this.importCsvColumnTarget?this.importCsvColumnTarget.index:-1,(function(t,e){r.competency=[],r.relation=[];for(var i=0;i<t.length;i++)r.competency.push(t[i].shortId());for(i=0;i<e.length;i++)r.relation.push(e[i].shortId());s.repo.saveTo(r,(function(t){s.importFile.splice(0,1),s.importFile.length>0?(s.firstImport=!1,s.analyzeImportFile()):(s.$store.commit("app/importFramework",r),s.$store.commit("editor/framework",r),s.importSuccess(),s.spitEvent("importFinished",r.shortId(),"importPage"))}),(function(t){s.$store.commit("app/importTransition","process"),s.$store.commit("app/addImportError",t)}))}),(function(t){s.$store.commit("app/importStatus",t),s.$store.commit("app/importTransition","process"),s.$store.commit("app/addImportError",t)}),(function(t){null!=t.relations&&void 0!==t.relations?s.$store.commit("app/importStatus",t.relations+"/"+s.relationCount+" relations imported."):null!=t.competencies&&void 0!==t.competencies?s.$store.commit("app/importStatus",t.competencies+"/"+s.competencyCount+" competencies imported."):s.$store.commit("app/importStatus","Importing...")}),!1,s.repo)},importJsonLd:function(t){var e=new FormData;if(null!=t&&void 0!==t)e.append("data",JSON.stringify(t));else{var i=this.importFile[0];e.append("file",i)}var o=EcIdentityManager.ids[0];null!=o&&e.append("owner",o.ppk.toPk().toPem());var r=this;r.$store.commit("app/importFramework",null),EcRemote.postInner(this.repo.selectedServer,"ctdlasn",e,null,(function(t){if(-1!==t.indexOf("ctdlasn")){var e=t.substring(0,t.indexOf("ctdlasn")),i=t.substring(t.indexOf("ctdlasn")+7);t=e+"data"+i}var o;r.conceptMode?o=EcConceptScheme.getBlocking(t):(o=EcFramework.getBlocking(t),r.$store.commit("app/importFramework",o)),r.$store.commit("editor/framework",o),r.$store.commit("app/importFramework",o),r.spitEvent("importFinished",o.shortId(),"importPage"),null!=r.importFile&&r.importFile.splice(0,1),r.importFile&&r.importFile.length>0?(r.firstImport=!1,r.analyzeImportFile()):r.importSuccess()}),(function(t){r.$store.commit("app/importTransition","process"),r.$store.commit("app/importStatus","Import failed. Check your import file for any errors."),appLog(t.statusText),r.$store.commit("app/addImportError",t)})),r.conceptMode?"true"===r.queryParams.ceasnDataFields?r.$store.commit("app/importStatus","Importing Concept Scheme"):r.$store.commit("app/importStatus","Importing Taxonomy"):r.$store.commit("app/importStatus","Importing Framework")},importCtdlAsnConceptCsv:function(){var t=this,e=null;EcIdentityManager.ids.length>0&&(e=EcIdentityManager.ids[0]),t.$store.commit("app/importStatus","process"),CTDLASNCSVConceptImport.importFrameworksAndCompetencies(t.repo,t.importFile[0],(function(e,i){if("true"===t.queryParams.ceasnDataFields)for(var o=0;o<e.length;o++)null!=e[o]["dcterms:language"]&&void 0!==e[o]["dcterms:language"]||(t.setDefaultLanguage(),e[o]["dcterms:language"]=defaultLanguage);var r=e.concat(i);t.$store.commit("app/importStatus","Saving "+r.length+" objects."),t.repo.multiput(r,(function(){for(var i=0;i<e.length;i++)t.spitEvent("importFinished",e[i].shortId(),"importPage");t.$store.commit("editor/framework",e[0]),t.$store.commit("app/importFramework",e[0]),t.importSuccess()}),(function(e){t.$store.commit("app/importTransition","process"),t.$store.commit("app/addImportError","Failed to save: "+e),appError(e)}))}),(function(e){t.$store.commit("app/importTransition","process"),t.$store.commit("app/addImportError",e),appError(e)}),e)},importFromFile:function(){var t=this;if(appLog("this.importFileType",t.importFileType),t.$store.commit("app/importTransition","process"),"csv"===t.importFileType)t.importCsv();else if("ctdlasncsv"===t.importFileType)t.importCtdlAsnCsv();else if("conceptcsv"===t.importFileType)t.importCtdlAsnConceptCsv();else if("ctdlasnjsonld"===t.importFileType)t.importJsonLd();else if("asn"===t.importFileType)t.importAsn();else if("pdf"===t.importFileType)t.importPdf();else if("medbiq"===t.importFileType)t.importMedbiq();else{var e="Unsupported file type"+t.importFileType;t.$store.commit("app/addImportError",e),t.$store.commit("app/importTransition","process")}},connectToServer:function(){appLog("connecting to server"),this.caseDocs.splice(0,this.caseDocs.length),this.caseDetectEndpoint()},caseDetectEndpoint:function(){var t=this,e=this.importServerUrl;e.endsWith("/")||(e+="/"),this.get(e,"ims/case/v1p0/CFDocuments",{Accept:"application/json"},(function(e){t.caseGetDocsSuccess(e)}),(function(e){t.caseGetServerSide()}))},caseGetDocsSuccess:function(t){var e;if(t=JSON.parse(t),null==t.CFDocuments)e="No frameworks found. Please check the URL and try again.",this.$store.commit("app/addImportError",e),me.$store.commit("app/importTransition","process");else{var i=t.CFDocuments.length+" frameworks detected.";this.$store.commit("app/importStatus",i),this.$store.commit("app/importTransition","serverFrameworksDetected");for(var o=0;o<t.CFDocuments.length;o++){var r=t.CFDocuments[o],s={};s.name=r.title,s.id=r.uri,s.identifier=r.identifier,s.loading=!1,s.success=!1,s.error=!1,s.checked=!1,this.caseDocs.push(s)}this.caseCancel=!1}},caseGetServerSide:function(){var t=this;EcRemote.getExpectingString(this.repo.selectedServer,"ims/case/getDocs?url="+this.importServerUrl,(function(e){t.caseGetDocsSuccess(e)}),(function(e){t.$store.commit("app/importTransition","process"),t.$store.commit("app/addImportError","No frameworks found. Please check the URL and try again.")}))},importCase:function(t){if(t){var e=t[1];this.caseDocs[e].loading=!1,this.caseDocs[e].error=!0}for(var i=this.caseDocs.length-1;i>=0;i--)this.caseDocs[i].checked?!1===this.caseDocs[i].success&&!1===this.caseDocs[i].error&&(this.caseDocs[i].loading=!0):this.caseDocs.splice(i,1);if(!this.caseCancel){var o=0,r=null;for(i=0;i<this.caseDocs.length;i++)!0===this.caseDocs[i].loading&&(o++,null==r&&(r=i));if(0===o)this.$store.commit("app/importFramework",this.$store.getters["editor/framework"]),this.importSuccess(),this.$store.commit("app/importStatus","Import finished.");else{var s=this,a=this.caseDocs[r].id;s.repo.search('(@id:"'+a+'") AND (@type:Framework)',(function(){}),(function(t){appLog(t),t.length>0?(s.$store.commit("app/importStatus","framework found..."),s.showModal("duplicateOverwriteOnly",[s.caseDocs[r],r])):(s.$store.commit("app/importStatus","no match, saving new framework..."),s.continueCaseImport([s.caseDocs[r],r]))}),(function(t){s.$store.commit("app/importStatus",t),s.$store.commit("app/importTransition","process"),s.$store.commit("app/addImportError",t)}))}}},continueCaseImport:function(t){var e=t[0],i=t[1],o=this,r=e.id,s=e.identifier,a=EcIdentityManager.ids[0],n=new FormData;null!=a&&n.append("owner",a.ppk.toPk().toPem()),EcRemote.postInner(this.repo.selectedServer,"ims/case/harvest?caseEndpoint="+this.importServerUrl+"&dId="+s,n,null,(function(t){o.caseDocs[i].loading=!1,o.caseDocs[i].success=!0,appLog(r),EcFramework.get(r,(function(t){o.$store.commit("editor/framework",t),o.spitEvent("importFinished",t.shortId(),"importPage"),o.importCase()}),(function(t){appError(t),o.importCase()}))}),(function(t){o.caseDocs[i].loading=!1,o.caseDocs[i].error=!0,o.importCase()}))},cancelCase:function(){this.caseCancel=!0;for(var t=null,e=0;e<this.caseDocs.length;e++)!0===this.caseDocs[e].loading&&(null==t?t=e:(this.caseDocs[e].loading=!1,this.caseDocs[e].error=!0));this.clearImport(),this.$store.commit("app/importTransition","upload")},parseText:function(){var t=this;null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&this.importFramework.addOwner(EcIdentityManager.ids[0].ppk.toPk()),null!==this.queryParams.newObjectEndpoint&&void 0!==this.queryParams.newObjectEndpoint?this.importFramework.generateShortId(this.queryParams.newObjectEndpoint):this.importFramework.generateId(this.repo.selectedServer),this.importFramework.name=this.importFrameworkName,this.importFramework["schema:dateCreated"]=(new Date).toISOString(),this.importFramework["schema:dateModified"]=(new Date).toISOString();for(var e=[this.importFramework],i=0;i<this.importFramework.competency.length;i++){var o=EcRepository.cache[this.importFramework.competency[i]];null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&o.addOwner(EcIdentityManager.ids[0].ppk.toPk()),e.push(o)}if(this.importFramework.relation)for(i=0;i<this.importFramework.relation.length;i++){var r=EcRepository.cache[this.importFramework.relation[i]];null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&r.addOwner(EcIdentityManager.ids[0].ppk.toPk()),e.push(r)}this.repo.multiput(e,(function(){t.importSuccess(),t.spitEvent("importFinished",t.importFramework.shortId(),"importPage")}),(function(e){appLog("failure",e),t.$store.commit("app/addImportError",e),t.$store.commit("app/importTransition","process")}))},importFromUrl:function(){var t,e=this;EcRemote.getExpectingString(this.importUrl,null,(function(i){i=JSON.parse(i);var o=i["@graph"];if(null==o)return t="URL must have an '@graph' field at the top level.",e.$store.commit("app/addImportError",t),void e.$store.commit("app/importTransition","process");var r=o[0]["@id"];r?e.repo.search('(@id:"'+r+'") AND (@type:Framework)',(function(){}),(function(t){appLog(t),t.length>0?(e.$store.commit("app/importStatus","framework found..."),e.showModal("duplicateOverwriteOnly",[i])):(e.$store.commit("app/importStatus","no match, saving new framework..."),e.importJsonLd(i))}),(function(t){e.$store.commit("app/importStatus",t),e.$store.commit("app/importTransition","process"),e.$store.commit("app/addImportError",t)})):e.importJsonLd(i),-1!==o[0]["@type"].indexOf("Concept")&&(t="true"===e.ceasnDataFields?"Competency Editor cannot be used to import concept schemes.":"Competency Editor cannot be used to import taxonomies.",e.$store.commit("app/addImportError",t),e.$store.commit("app/importTransition","process"))}),(function(i){i?(e.$store.commit("app/addImportError",i),e.$store.commit("app/importTransition","process")):(t="Import Error",e.$store.commit("app/addImportError",t),e.$store.commit("app/importTransition","process"))}))},scrollFunction:function(t){document.getElementsByClassName("parent-object");var e=t.target.scrollTop;this.parentObjectClass=0!==e?"parent-object scrolled":"parent-object"}},beforeDestroy:function(){this.clearImport()},mounted:function(){this.clearImport();var t=document.getElementById("import");t.addEventListener("scroll",a()(this.scrollFunction,100,{leading:!0}))}},J=U,W=(i("6bed"),Object(S["a"])(J,o,r,!1,null,null,null));e["default"]=W.exports},"6bed":function(t,e,i){"use strict";var o=i("8e28"),r=i.n(o);r.a},"81d7":function(t,e,i){"use strict";var o=i("ed1c"),r=i.n(o);r.a},"8e28":function(t,e,i){},"8e85":function(t,e,i){},e6c0:function(t,e,i){"use strict";var o=i("8e85"),r=i.n(o);r.a},ed1c:function(t,e,i){}}]);
//# sourceMappingURL=chunk-8c6d9ebc.2a9f2b4e.js.map
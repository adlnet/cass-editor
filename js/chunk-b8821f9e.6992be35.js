(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b8821f9e"],{"040c":function(t,e,s){},2102:function(t,e,s){},"3e24":function(t,e,s){},"401c":function(t,e,s){"use strict";var o=s("2102"),i=s.n(o);i.a},6675:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"comment-list-item"},[s("li",{staticClass:"comment-list__user",attrs:{title:t.comment.creatorEmail}},[t._v(" "+t._s(t.comment.creatorName)+" ")]),s("li",{staticClass:"comment-list__email"},[t._v(" "+t._s(t.comment.creatorEmail)+" ")]),s("li",{staticClass:"comment-list__timestamp"},[t._v(" "+t._s(t.toPrettyDateString(t.comment.dateCreated))+" ")]),s("li",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeCommentListDropDown,expression:"closeCommentListDropDown"}],staticClass:"comment-list__message-container"},[t.comment.canModify?s("div",{staticClass:"dropdown",class:{"is-active":t.commentListDropDownActive}},[s("div",{staticClass:"dropdown-trigger"},[s("button",{staticClass:"button is-text has-text-dark",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"},on:{click:function(e){t.commentListDropDownActive=!t.commentListDropDownActive}}},[t._m(0)])]),s("div",{staticClass:"dropdown-menu",attrs:{id:"dropdown-menu",role:"menu"}},[s("div",{staticClass:"dropdown-content"},[s("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:t.handleClickEdit}},[t._v(" edit ")]),s("a",{staticClass:"dropdown-item",on:{click:t.handleClickDelete}},[t._v(" delete ")])])])]):t._e(),s("div",{staticClass:"comment-list__message-container__message",class:{"show-more":t.showMore}},[t._v(" "+t._s(t.comment.commentText)+" ")]),t.comment.commentText.length>90?s("div",{staticClass:"buttons is-right"},[t.showMore?s("div",{staticClass:"button is-text has-text-primary",on:{click:function(e){t.showMore=!1}}},[t._v(" show less ")]):s("div",{staticClass:"button is-text has-text-primary",on:{click:function(e){t.showMore=!0}}},[t._v(" show more ")])]):t._e()]),t.comment.lastEditDate?s("li",{staticClass:"comment-list__message_edit"},[t._v(" *Edited: "+t._s(t.toPrettyDateString(t.comment.lastEditDate))+" ")]):t._e(),t._m(1),t.comment.replies.length>0?s("li",t._l(t.comment.replies,(function(t){return s("comment",{key:t.commentId,attrs:{comment:t,canReply:!1}})})),1):t._e()])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon has-text-primary"},[s("i",{staticClass:"fas fa-ellipsis-v"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"comment-list__reply_hr"},[s("hr")])}],n=(s("d3b7"),s("b85c")),r=s("872c"),a={name:"Comment",mixins:[r["a"]],components:{comment:function(){return Promise.resolve().then(s.bind(null,"6675"))}},props:{comment:{type:Object},canReply:{type:Boolean,default:!1}},data:function(){return{showMore:!1,commentListDropDownActive:!1}},methods:{closeCommentListDropDown:function(){this.commentListDropDownActive=!1},handleClickReply:function(){this.$store.commit("editor/setAddCommentAboutId",this.comment.aboutId),this.$store.commit("editor/setAddCommentType","reply"),this.$store.commit("editor/setCommentToReply",this.comment.comment),this.$store.commit("app/showModal",{component:"AddComment"})},handleClickEdit:function(){this.commentListDropDownActive=!1,this.$store.commit("editor/setAddCommentAboutId",this.comment.aboutId),this.$store.commit("editor/setAddCommentType","edit"),this.$store.commit("editor/setCommentToEdit",this.comment.comment),this.$store.commit("app/showModal",{component:"AddComment"})},handleClickEditReply:function(t){this.$store.commit("editor/setAddCommentAboutId",this.comment.aboutId),this.$store.commit("editor/setAddCommentType","edit"),this.$store.commit("editor/setCommentToEdit",this.comment.replies[t].comment),this.$store.commit("app/showModal",{component:"AddComment"})},handleClickDelete:function(){var t=[];if(t.push(this.comment.comment),this.comment.replies&&this.comment.replies.length>0){var e,s=Object(n["a"])(this.comment.replies);try{for(s.s();!(e=s.n()).done;){var o=e.value;t.push(o.comment)}}catch(i){s.e(i)}finally{s.f()}}this.$store.commit("editor/setCommentsToDelete",t),this.$store.commit("app/showModal",{component:"DeleteCommentConfirm"})},handleClickDeleteReply:function(t){var e=[];e.push(this.comment.replies[t].comment),this.$store.commit("editor/setCommentsToDelete",e),this.$store.commit("app/showModal",{component:"DeleteCommentConfirm"})}},computed:{commentId:function(){return this.comment.commentId}}},c=a,m=s("2877"),l=Object(m["a"])(c,o,i,!1,null,null,null);e["default"]=l.exports},"94fc":function(t,e,s){"use strict";var o=s("3e24"),i=s.n(o);i.a},d57a:function(t,e,s){"use strict";var o=s("d921"),i=s.n(o);i.a},d921:function(t,e,s){},dd98:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("aside",{staticClass:"menu has-background-light",attrs:{id:"right-side-bar"}},[s("button",{staticClass:"delete is-dark has-text-dark is-pulled-right",attrs:{"aria-label":"close"},on:{click:function(e){return t.$store.commit("app/closeRightAside")}}}),s(t.rightAsideContent,{tag:"Component"})],1)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("aside",{staticClass:"menu has-background-lightest",attrs:{id:"right-side-bar__comments"}},[t._m(0),t.isCommentsBusy?s("div",{staticClass:"has-text-centered"},[t._m(1)]):t._e(),t.isCommentsBusy?t._e():s("div",[t.commentWrapperList.length<=0?s("div",{staticClass:"has-text-centered"},[t._m(2)]):t._e(),t.commentWrapperList.length>0?t._l(t.commentWrapperList,(function(e,o){return s("div",{key:o,staticClass:"comment-list"},[s("h4",{staticClass:"comment-list__about",on:{click:function(s){return t.setUpScroll(e)}}},[t._v(" "+t._s(e.aboutName)+" ")]),s("Comment",{key:e.commentId,attrs:{comment:e,canReply:t.canReplyToComments}}),s("div",{staticClass:"buttons is-right"},[s("div",{staticClass:"button is-small is-outlined is-primary",attrs:{title:"reply"},on:{click:function(s){return t.handleClickReply(e)}}},[t._m(3,!0),s("span",[t._v("reply")])])])],1)})):t._e()],2)])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"right-aside-bar__title"},[s("h3",{staticClass:"title is-size-3"},[t._v(" Comments ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-large has-text-center has-text-link"},[s("i",{staticClass:"fas fa-2x fa-spinner is-info fa-pulse"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"has-text-center"},[s("p",[s("i",{staticClass:"fa fa-exclamation-circle"}),t._v(" No comments available")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-reply"})])}],a=(s("caad"),s("b0c0"),s("ac1f"),s("841c"),s("1276"),s("b85c")),c=s("6675"),m=s("872c"),l={name:"Comments",mixins:[m["a"]],data:function(){return{COMMENT_SEARCH_SIZE:1e4,isCommentsBusy:!1,localFrameworkCommentList:[],commentAboutMap:{},commentWrapperList:[],commentWrapperMap:{},canReplyToComments:!1}},components:{Comment:c["default"]},methods:{setUpScroll:function(t){var e={ts:Date.now(),scrollId:"#scroll-"+t.aboutId.split("/").pop()};this.$store.commit("editor/setCommentScrollTo",e)},handleClickReply:function(t){this.$store.commit("editor/setAddCommentAboutId",t.aboutId),this.$store.commit("editor/setAddCommentType","reply"),this.$store.commit("editor/setCommentToReply",t.comment),this.$store.commit("app/showModal",{component:"AddComment"})},determineCanModifyComment:function(t){return!!this.loggedOnPerson.shortId().equals(t.creator)},buildCommentWrapper:function(t,e,s){var o={},i=this.frameworkCommentPersonMap[t.creator];return o.comment=t,o.creator=i,o.aboutId=t.about,o.aboutName=e,o.commentId=t.shortId(),o.creatorName=i.name,o.creatorEmail=i.email,o.dateCreated=t.dateCreated-0,t.lastEditDate&&(o.lastEditDate=t.lastEditDate-0),o.commentText=t.text,o.isTopLevel=s,o.canModify=this.determineCanModifyComment(t),o.replies=[],o},buildFrameworkCommentWrappers:function(){var t=this.commentAboutMap[this.currentFramework.shortId()];if(t&&t.length>0){var e,s=Object(a["a"])(t);try{for(s.s();!(e=s.n()).done;){var o=e.value,i=this.buildCommentWrapper(o,this.currentFramework.getName(),!0);this.commentWrapperList.push(i),this.commentWrapperMap[o.shortId()]=i}}catch(n){s.e(n)}finally{s.f()}}},getCompetencyName:function(t){var e=EcRepository.getBlocking(t);return e?e.getName():"Unknown Competency"},buildCompetencyCommentWrappers:function(){if(this.currentFramework.competency){var t,e=Object(a["a"])(this.currentFramework.competency);try{for(e.s();!(t=e.n()).done;){var s=t.value,o=this.commentAboutMap[s];if(o&&o.length>0){var i,n=this.getCompetencyName(s),r=Object(a["a"])(o);try{for(r.s();!(i=r.n()).done;){var c=i.value,m=this.buildCommentWrapper(c,n,!0);this.commentWrapperList.push(m),this.commentWrapperMap[c.shortId()]=m}}catch(l){r.e(l)}finally{r.f()}}}}catch(l){e.e(l)}finally{e.f()}}},addRepliesToParentWrapper:function(t){var e,s=Object(a["a"])(t);try{for(s.s();!(e=s.n()).done;){var o=e.value,i=this.commentWrapperMap[o],n=i.aboutId,r=this.commentWrapperMap[n];r&&r.replies.push(i)}}catch(c){s.e(c)}finally{s.f()}},buildReplyCommentWrappers:function(){var t,e=[],s=Object(a["a"])(this.frameworkCommentList);try{for(s.s();!(t=s.n()).done;){var o=t.value,i=o.shortId(),n=this.commentAboutMap[i];if(n&&n.length>0){var r,c=Object(a["a"])(n);try{for(c.s();!(r=c.n()).done;){var m=r.value,l=this.buildCommentWrapper(m,"reply",!1);this.commentWrapperMap[m.shortId()]=l,e.push(m.shortId())}}catch(d){c.e(d)}finally{c.f()}}}}catch(d){s.e(d)}finally{s.f()}this.addRepliesToParentWrapper(e)},buildCommentDisplayStructures:function(){this.buildFrameworkCommentWrappers(),this.buildCompetencyCommentWrappers(),this.buildReplyCommentWrappers()},buildCommentAboutMap:function(){var t,e=Object(a["a"])(this.frameworkCommentList);try{for(e.s();!(t=e.n()).done;){var s=t.value,o=s.about;this.commentAboutMap[o]||(this.commentAboutMap[o]=[]),this.commentAboutMap[o].push(s)}}catch(i){e.e(i)}finally{e.f()}},parseComments:function(){this.currentFramework?(this.isCommentsBusy=!0,this.commentAboutMap={},this.commentWrapperList=[],this.commentWrapperMap={},this.buildCommentAboutMap(),this.buildCommentDisplayStructures(),this.isCommentsBusy=!1):this.clearAllFrameworkCommentData()},buildFrameworkCommentPersonMapSuccess:function(t){var e,s={},o=Object(a["a"])(t);try{for(o.s();!(e=o.n()).done;){var i=e.value;s[i.shortId()]=i}}catch(n){o.e(n)}finally{o.f()}this.$store.commit("editor/setFrameworkCommentDataLoaded",!0),this.$store.commit("editor/setFrameworkCommentPersonMap",s),this.$store.commit("editor/setFrameworkCommentList",this.localFrameworkCommentList)},buildFrameworkCommentPersonMapFailure:function(t){appLog("buildFrameworkCommentPersonMapFailure: "+t),this.isCommentsBusy=!1},buildCommentCreatorList:function(){var t,e=[],s=Object(a["a"])(this.localFrameworkCommentList);try{for(s.s();!(t=s.n()).done;){var o=t.value;e.includes(o.creator)||e.push(o.creator)}}catch(i){s.e(i)}finally{s.f()}return e},buildFrameworkCommentPersonMap:function(){var t=this.buildCommentCreatorList();t.length>0?window.repo.multiget(t,this.buildFrameworkCommentPersonMapSuccess,this.buildFrameworkCommentPersonMapFailure):this.buildFrameworkCommentPersonMapSuccess([])},sortLocalFrameworkCommentList:function(){this.localFrameworkCommentList.sort((function(t,e){return t.dateCreated-0>e.dateCreated-0?1:e.dateCreated-0>t.dateCreated-0?-1:0}))},buildFrameworkCommentListSuccess:function(t){this.localFrameworkCommentList=t,this.sortLocalFrameworkCommentList(),this.buildFrameworkCommentPersonMap()},buildFrameworkCommentListFailure:function(t){appLog("buildFrameworkCommentListFailure: "+t),this.isCommentsBusy=!1},clearAllFrameworkCommentData:function(){this.isCommentsBusy=!1,this.localFrameworkCommentList=[],this.commentAboutMap={},this.commentWrapperList=[],this.commentWrapperMap={},this.canReplyToComments=!1},buildFrameworkCommentList:function(){if(this.currentFramework){var t={};t.size=this.COMMENT_SEARCH_SIZE,EcComment.search(window.repo,'isBasedOn:"'+this.currentFramework.shortId()+'"',this.buildFrameworkCommentListSuccess,this.buildFrameworkCommentListFailure,null)}else this.clearAllFrameworkCommentData()},buildCommentDataSet:function(){!this.frameworkCommentList||this.frameworkCommentList.length<=0?(this.isCommentsBusy=!0,this.buildFrameworkCommentList()):this.parseComments()}},computed:{loggedOnPerson:function(){return this.$store.getters["user/loggedOnPerson"]},currentFramework:function(){return this.$store.getters["editor/framework"]},currentFrameworkCompetencies:function(){return this.$store.getters["editor/framework"].competency},frameworkCommentList:function(){return this.$store.getters["editor/frameworkCommentList"]},frameworkCommentPersonMap:function(){return this.$store.getters["editor/frameworkCommentPersonMap"]}},watch:{currentFrameworkCompetencies:function(){this.parseComments()},frameworkCommentList:function(){this.parseComments()}},mounted:function(){this.buildCommentDataSet(),this.canReplyToComments=this.canAddCommentsCurrentFramework()}},d=l,u=(s("94fc"),s("2877")),h=Object(u["a"])(d,n,r,!1,null,null,null),p=h.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("aside",{staticClass:"menu has-background-light",attrs:{id:"comments-side-bar"}},[s("p",{staticClass:"subtitle is-size-4"},[s("span",{staticClass:"icon",on:{click:function(e){return t.$store.commit("app/closeRightAside")}}},[s("i",{staticClass:"fa fa-caret-right"})]),t._v(" Version History ")])])},C=[],b={name:"Versions",data:function(){return{isCommenter:!0,isAdmin:!1,isViewer:!0}},components:{}},k=b,v=(s("eeb6"),Object(u["a"])(k,f,C,!1,null,null,null)),w=v.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"right-aside__filter-and-sort"},[s("h3",{staticClass:"title is-size-4"},[t._v(" Filter and Sort ")]),s("div",{staticClass:"filter-sort-section"},[s("h3",{staticClass:"filter-sort-header"},[t._v(" Sort by ")]),t._l(t.sortResults,(function(e){return s("div",{key:e,staticClass:"field"},[e.enabled?[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sortBy,expression:"sortBy"}],staticClass:"is-checkradio",attrs:{id:e.id,type:"radio",name:"sortResults"},domProps:{value:{id:e.id,label:e.label},checked:t._q(t.sortBy,{id:e.id,label:e.label})},on:{change:function(s){t.sortBy={id:e.id,label:e.label}}}}),s("label",{staticClass:"label",attrs:{for:e.id}},[t._v(t._s(e.label))])]:t._e()],2)}))],2),!t.showQuickFilterHeading||t.$store.getters["editor/conceptMode"]&&!t.loggedIn?t._e():s("div",{staticClass:"filter-sort-section"},[s("h3",{staticClass:"filter-sort-header"},[t._v(" Quick Filters ")]),t._l(t.quickFilters,(function(e){return s("div",{key:e,staticClass:"field"},[e.enabled?[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"option.checked"}],staticClass:"is-checkradio",attrs:{id:e.id,type:"checkbox",name:e.id},domProps:{checked:Array.isArray(e.checked)?t._i(e.checked,null)>-1:e.checked},on:{change:function(s){var o=e.checked,i=s.target,n=!!i.checked;if(Array.isArray(o)){var r=null,a=t._i(o,r);i.checked?a<0&&t.$set(e,"checked",o.concat([r])):a>-1&&t.$set(e,"checked",o.slice(0,a).concat(o.slice(a+1)))}else t.$set(e,"checked",n)}}}),s("label",{staticClass:"label",attrs:{for:e.id}},[t._v(t._s(e.label))])]:t._e()],2)}))],2),t.$store.getters["editor/conceptMode"]?t._e():s("div",{staticClass:"filter-sort-section"},[s("h3",{staticClass:"filter-sort-header"},[t._v(" Apply search term to ")]),t._l(t.applySearchTo,(function(e){return s("div",{key:e,staticClass:"field"},[e.enabled?[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checked,expression:"option.checked"}],staticClass:"is-checkradio",attrs:{id:e.id,type:"checkbox",name:e.id},domProps:{checked:Array.isArray(e.checked)?t._i(e.checked,null)>-1:e.checked},on:{change:function(s){var o=e.checked,i=s.target,n=!!i.checked;if(Array.isArray(o)){var r=null,a=t._i(o,r);i.checked?a<0&&t.$set(e,"checked",o.concat([r])):a>-1&&t.$set(e,"checked",o.slice(0,a).concat(o.slice(a+1)))}else t.$set(e,"checked",n)}}}),s("label",{staticClass:"label",attrs:{for:e.id}},[t._v(t._s(e.label))])]:t._e()],2)}))],2)])},_=[],g={name:"FilterAndSort",data:function(){return{sortResults:[{id:"dateCreated",label:"created date",enabled:!0},{id:"lastEdited",label:"last edited",enabled:!0}],quickFilters:[{id:"configMatchDefault",checked:!1,label:"Configuration matches default",enabled:!0},{id:"ownedByMe",checked:!1,label:"Owned by me",enabled:!0},{id:"notOwnedByMe",checked:!1,label:"Not owned by me",enabled:!0}],applySearchTo:[{id:"frameworkName",checked:!1,label:"Framework name",enabled:!0},{id:"frameworkDescription",checked:!1,label:"Framework description",enabled:!0},{id:"competencyName",checked:!1,label:"Competency name",enabled:!0},{id:"competencyDescription",checked:!1,label:"Competency description",enabled:!0},{id:"ownerName",checked:!1,label:"Owner name",enabled:!0}],showQuickFilterHeading:!0}},computed:{sortBy:{get:function(){return this.$store.getters["app/sortResults"]},set:function(t){this.$store.commit("app/sortResults",t)}},loggedIn:function(){return EcIdentityManager.ids&&EcIdentityManager.ids.length},searchByOwnerNameEnabled:function(){return this.$store.state.featuresEnabled.searchByOwnerNameEnabled},configurationsEnabled:function(){return this.$store.state.featuresEnabled.configurationsEnabled}},mounted:function(){if(!this.searchByOwnerNameEnabled)for(var t=0;t<this.applySearchTo.length;t++)"ownerName"===this.applySearchTo[t].id&&(this.applySearchTo[t].enabled=!1);if(!this.loggedIn)for(t=0;t<this.quickFilters.length;t++)"configMatchDefault"!==this.quickFilters[t].id&&(this.quickFilters[t].enabled=!1);if(this.$store.getters["editor/conceptMode"]||!this.configurationsEnabled)for(t=0;t<this.quickFilters.length;t++)"configMatchDefault"===this.quickFilters[t].id&&(this.quickFilters[t].enabled=!1);var e=!1;for(t=0;t<this.quickFilters.length;t++)!0===this.quickFilters[t].enabled&&(e=!0);this.showQuickFilterHeading=e},watch:{applySearchTo:{handler:function(){this.$store.commit("app/applySearchTo",this.applySearchTo)},deep:!0},quickFilters:{handler:function(){appLog("watched"),this.$store.commit("app/quickFilters",this.quickFilters)},deep:!0}}},F=g,A=(s("d57a"),Object(u["a"])(F,y,_,!1,null,null,null)),M=A.exports,$={name:"RightAside",data:function(){return{isCommenter:!0,isAdmin:!1,isViewer:!0}},components:{Comments:p,Versions:w,FilterAndSort:M},computed:{showRightAside:function(){return this.$store.getters["app/showRightAside"]},rightAsideContent:function(){return this.$store.getters["app/rightAsideContent"]}}},L=$,D=(s("401c"),Object(u["a"])(L,o,i,!1,null,null,null));e["default"]=D.exports},eeb6:function(t,e,s){"use strict";var o=s("040c"),i=s.n(o);i.a}}]);
//# sourceMappingURL=chunk-b8821f9e.6992be35.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-423ad069"],{"791e":function(e,t,i){"use strict";var r=i("c391"),n=i.n(r);n.a},c391:function(e,t,i){},c643:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"lode__hierarchy"},[i("div",{staticClass:"hierarchy-buttons columns is-gapless is-paddingless is-mobile is-marginless is-paddingless"},[i("div",{staticClass:"column is-narrow"},[e.canEdit&&"importPreview"!==e.view&&"importLight"!==e.view&&"crosswalk"!==e.view?i("div",{staticClass:"check-radio-all-column"},[i("div",{staticClass:"field"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.selectAll,expression:"selectAll"}],staticClass:"is-checkradio",attrs:{id:"selectAllCheckbox",type:"checkbox",name:"selectAllCheckbox"},domProps:{checked:Array.isArray(e.selectAll)?e._i(e.selectAll,null)>-1:e.selectAll},on:{change:function(t){var i=e.selectAll,r=t.target,n=!!r.checked;if(Array.isArray(i)){var o=null,a=e._i(i,o);r.checked?a<0&&(e.selectAll=i.concat([o])):a>-1&&(e.selectAll=i.slice(0,a).concat(i.slice(a+1)))}else e.selectAll=n}}}),i("label",{attrs:{for:"selectAllCheckbox"}})])]):e._e()]),i("div",{staticClass:"column is-narrow"},[e.expanded?i("div",{staticClass:"icon is-vcentered",on:{click:function(t){e.expanded=!1}}},[i("i",{staticClass:"fa fa-caret-down has-text-primary is-size-2"})]):e.expanded?i("div",{staticClass:"icon is-vcentered"},[i("i",{staticClass:"fa fa-circle is-size-7 has-text-light"})]):i("div",{staticClass:"icon is-vcentered",on:{click:function(t){e.expanded=!0}}},[i("i",{staticClass:"fa fa-caret-right has-text-primary is-size-2"})]),e.selectButtonText?i("div",{staticClass:"button is-small is-outlined is-primary",on:{click:function(t){return e.$emit("selectButtonClick",e.selectedArray)}}},[e._v("\n                "+e._s(e.selectButtonText)+"\n            ")]):e._e()]),"crosswalk"===e.view?i("div",{staticClass:"crosswalk-buttons column is-fullwidth"},[i("div",{staticClass:"buttons is-right"},[i("div",{staticClass:"button is-small is-outlined is-primary",class:{"is-focused":"showAligned"===e.filter},attrs:{title:"show aligned only"},on:{click:function(t){return e.filterHierarchy("showAligned")}}},[e._m(0)]),i("div",{staticClass:"button is-small is-outlined is-primary",class:{"is-focused":"showUnaligned"===e.filter},attrs:{title:"show unaligned only"},on:{click:function(t){return e.filterHierarchy("showUnaligned")}}},[e._m(1)]),i("div",{staticClass:"button is-outlined is-small is-primary",class:{"is-focused":"showAll"===e.filter},attrs:{title:"show all"},on:{click:function(t){return e.filterHierarchy("showAll")}}},[e._m(2)]),"crosswalkSource"===e.subview&&0===e.alignmentsToSave.length?i("button",{staticClass:"button is-small is-outlined is-dark",attrs:{title:"change source"},on:{click:e.changeFrameworkSource}},[e._m(3)]):"crosswalkTarget"===e.subview&&0===e.alignmentsToSave.length?i("button",{staticClass:"button is-small is-outlined is-dark",attrs:{title:"change target"},on:{click:e.changeFrameworkTarget}},[e._m(4)]):e._e()])]):e._e(),"crosswalk"!==e.view?i("div",{staticClass:"column is-narrow"},[i("div",{staticClass:"buttons"},[e.multipleSelected&&"import"!==e.view&&e.canEdit?i("div",{staticClass:"button is-small is-outlined is-primary",on:{click:function(t){return e.$emit("editMultipleEvent")}}},[e._m(5),i("span",[e._v("\n                        Edit multiple\n                    ")])]):e._e(),!e.addingNode&&e.canEdit?i("div",{staticClass:"button is-small is-outlined is-primary",on:{click:function(t){e.addingNode=!0}}},[e._m(6),i("span",[e._v("\n                        Add Competency\n                    ")])]):e._e(),e.addingNode?i("div",{staticClass:"button is-outlined is-small is-dark ",on:{click:function(t){e.addingNode=!1}}},[e._m(7),i("span",[e._v("cancel")])]):e._e(),e.addingNode?i("div",{staticClass:"button is-outlined is-small is-primary ",on:{click:function(t){e.add(e.container.shortId(),null),e.addingNode=!1}}},[e._m(8),i("span",[e._v("\n                        create new\n                    ")])]):e._e(),e.addingNode?i("div",{staticClass:"button is-outlined is-small is-primary ",on:{click:e.clickToSearch}},[e._m(9),i("span",[e._v("search competencies")])]):e._e()])]):e._e(),"importPreview"===e.view||"importLight"===e.view?i("div",{staticClass:"column"},[i("div",{staticClass:"buttons is-right"},[i("div",{staticClass:"buttons is-small is-right"},[i("div",{staticClass:" button is-light is-small is-pulled-right is-dark is-outlined",on:{click:function(t){return e.$store.dispatch("app/clearImport")}}},[i("span",[e._v("\n                            Cancel\n                        ")]),e._m(10)]),"importLight"===e.view&&("text"!==e.importType||"text"===e.importType&&"Competency detected"===e.importStatus)?i("div",{staticClass:"button is-small is-dark is-outlined is-pulled-right",on:{click:function(t){return e.showModal("export")}}},[i("span",[e._v("\n                            Export\n                        ")]),e._m(11)]):e._e(),"importLight"===e.view&&("text"!==e.importType||"text"===e.importType&&"Competency detected"===e.importStatus)?i("div",{staticClass:"button is-small is-dark is-outlined is-pulled-right",on:{click:function(t){return e.$store.dispatch("app/clearImport")}}},[i("span",[e._v("\n                            import again\n                        ")]),e._m(12)]):e._e(),"importLight"===e.view&&("text"!==e.importType||"text"===e.importType&&"Competency detected"===e.importStatus)?i("div",{staticClass:"button is-small is-dark is-outlined is-pulled-right",on:{click:e.openFramework}},[i("span",[e._v("view in editor")]),e._m(13)]):e._e(),"importPreview"===e.view?i("div",{staticClass:"button  is-small is-primary is-outlined is-pulled-right",on:{click:function(t){return e.$store.commit("app/importTransition","light")}}},[i("span",[e._v("\n                            done editing\n                        ")]),e._m(14)]):e._e(),"importLight"===e.view&&("text"!==e.importType||"text"===e.importType&&"Competency detected"===e.importStatus)?i("router-link",{staticClass:"button is-small is-primary is-outlined is -pulled-right",attrs:{to:"/"}},[i("span",[e._v("\n                            Done\n                        ")]),i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-home"})])]):e._e()],1)])]):e._e()]),i("hr"),e.hierarchy?[i("draggable",e._b({staticClass:"lode__hierarchy-ul",attrs:{tag:"ul",disabled:!0!==e.canEdit||!e.isDraggable,group:{name:"test"},handle:".handle"},on:{start:e.beginDrag,end:e.endDrag},model:{value:e.hierarchy,callback:function(t){e.hierarchy=t},expression:"hierarchy"}},"draggable",e.dragOptions,!1),e._l(e.hierarchy,(function(t,r){return i("HierarchyNode",{key:t.obj.id,staticClass:"lode__hierarchy-li",attrs:{view:e.view,subview:e.subview,obj:t.obj,dragging:e.dragging,canEdit:e.canEdit,hasChild:t.children,profile:e.profile,exportOptions:e.exportOptions,highlightList:e.highlightList,selectAll:e.selectAll,newFramework:e.newFramework,index:r,parentStructure:e.hierarchy,parent:e.container,frameworkEditable:e.canEdit,filter:e.filter,properties:e.properties,expandAll:1==e.expanded,parentChecked:!1},on:{createNewNodeEvent:e.onCreateNewNode,mountingNode:e.handleMountingNode,beginDrag:e.beginDrag,move:e.move,select:e.select,add:e.add,deleteObject:e.deleteObject,removeObject:e.removeObject,exportObject:e.exportObject,draggableCheck:e.onDraggableCheck}})})),1)]:e._e()],2)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-link"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-unlink"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-list-alt"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-exchange-alt"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-exchange-alt"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-cog"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-plus-circle"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-times"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-plus"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-search"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-times-circle"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-download"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-redo-alt"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-edit"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"icon"},[i("i",{staticClass:"fa fa-arrow-right"})])}],o=(i("ac6a"),i("55dd"),i("1f27")),a=i("872c"),s=(i("21a6"),{name:"Hierarchy",mixins:[o["a"],a["a"]],props:{container:Object,containerType:String,containerTypeGet:String,containerNodeProperty:String,containerEdgeProperty:String,nodeType:String,edgeType:String,edgeRelationProperty:String,edgeSourceProperty:String,edgeTargetProperty:String,edgeRelationLiteral:String,viewOnly:Boolean,repo:Object,profile:Object,exportOptions:Array,highlightList:Array,newFramework:Boolean,properties:String,view:{type:String,default:"framework"},subview:{type:String,default:""}},data:function(){return{filter:"showAll",dragIcon:"fa-arrows-alt",dragOptions:{delay:100,disabled:!1,ghostClass:"ghost-drag",chosenClass:"chosen-drag",dragClass:"drag",scrollSensitivity:200,forceFallback:!0},multipleSelected:!1,addingNode:!1,structure:[],once:!0,dragging:!1,controlOnStart:!1,selectAll:!1,selectedArray:[],selectButtonText:null,expanded:!0,showAligned:!1,isDraggable:!0,frameworkExportOptions:[{name:"Achievement Standards Network (RDF+JSON)",value:"asn"},{name:"CASS (JSON-LD)",value:"jsonld"},{name:"CASS (RDF Quads)",value:"rdfQuads"},{name:"CASS (RDF+JSON)",value:"rdfJson"},{name:"CASS (RDF+XML)",value:"rdfXml"},{name:"CASS (Turtle)",value:"turtle"},{name:"Credential Engine ASN (JSON-LD)",value:"ctdlasnJsonld"},{name:"Credential Engine ASN (CSV)",value:"ctdlasnCsv"},{name:"Table (CSV)",value:"csv"},{name:"IMS Global CASE (JSON)",value:"case"}]}},components:{HierarchyNode:function(){return i.e("chunk-278dbbb4").then(i.bind(null,"8461"))},draggable:function(){return i.e("chunk-4a49d1f9").then(i.t.bind(null,"310e",7))}},watch:{container:{handler:function(){this.once=!0},deep:!0},selectedArray:function(){this.selectedArray.length>1?this.multipleSelected=!0:this.multipleSelected=!1,this.$emit("selectedArray",this.selectedArray)}},computed:{alignmentsToSave:function(){return this.$store.getters["crosswalk/alignmentsToSave"]?this.$store.getters["crosswalk/alignmentsToSave"]:[]},showAddComments:function(){return"true"!==this.$store.getters["editor/queryParams"].concepts&&this.$store.state.app.canAddComments},importType:function(){return this.$store.getters["app/importType"]},importStatus:function(){return this.$store.getters["app/importStatus"]},importTransition:function(){return this.$store.getters["app/importTransition"]},queryParams:function(){return this.$store.getters["editor/queryParams"]},hierarchy:function(){var e=this;if(null==this.container)return null;if(!this.once)return this.structure;console.log("Computing hierarchy.");var t=[];return null!=this.container[this.containerNodeProperty]&&(t=t.concat(this.container[this.containerNodeProperty])),null!=this.container[this.containerEdgeProperty]&&(t=t.concat(this.container[this.containerEdgeProperty])),t.length>0?this.repo.multiget(t,(function(t){e.computeHierarchy()}),console.error,console.log):e.computeHierarchy(),this.structure},canEdit:function(){return!0!==this.viewOnly&&this.container.canEditAny(EcIdentityManager.getMyPks())}},mounted:function(){this.queryParams&&(this.queryParams.singleSelect&&(this.selectButtonText=this.queryParams.singleSelect),this.queryParams.select&&""!==this.queryParams.select&&"select"!==this.queryParams.select&&(this.selectButtonText=this.queryParams.select))},methods:{showModal:function(e,t){var i=this,r={};"export"===e&&(r={type:e,selectedExportOption:"",title:"Export framework",exportOptions:this.frameworkExportOptions,text:"Select a file format to export your framework. Files download locally.",onConfirm:function(e){return i.exportObject(e)}}),this.$modal.show(r)},openFramework:function(){var e=EcFramework.getBlocking(this.container.shortId());this.$store.commit("editor/framework",e),this.$router.push({name:"framework",params:{frameworkId:this.container.id}})},changeFrameworkTarget:function(){this.$store.commit("crosswalk/step",1)},changeFrameworkSource:function(){this.$store.commit("crosswalk/step",0)},filterHierarchy:function(e){this.filter=e},onCreateNewNode:function(e,t){this.add(e,t)},handleMountingNode:function(){this.startTime()},startTime:function(){var e=this;setTimeout((function(){e.$emit("doneLoadingNodes")}),1e3)},computeHierarchy:function(){var e=this,t={},i={};if(this.structure=[],null==this.container)return t;if(null!==this.container[this.containerNodeProperty])for(var r=0;r<this.container[this.containerNodeProperty].length;r++){var n=window[this.nodeType].getBlocking(this.container[this.containerNodeProperty][r]);null!==n&&(t[this.container[this.containerNodeProperty][r]]=t[n.shortId()]=i[n.shortId()]=n)}if(null!=this.container[this.containerEdgeProperty])for(r=0;r<this.container[this.containerEdgeProperty].length;r++){var o=null;if(o=window[this.edgeType].getBlocking(this.container[this.containerEdgeProperty][r]),null!=o){if(o[this.edgeRelationProperty]===this.edgeRelationLiteral){if(null==t[o[this.edgeTargetProperty]])continue;if(null==t[o[this.edgeSourceProperty]])continue;null==t[o[this.edgeTargetProperty]]._children&&(t[o[this.edgeTargetProperty]]._children=[]),t[o[this.edgeTargetProperty]]._children.push(t[o[this.edgeSourceProperty]]),delete i[o[this.edgeSourceProperty]]}}else console.log("Hierarchy: Could not find edge: "+this.container[this.containerEdgeProperty][r])}if(null!=this.container[this.containerNodeProperty])for(r=0;r<this.container[this.containerNodeProperty].length;r++)t[this.container[this.containerNodeProperty][r]]&&null!=t[this.container[this.containerNodeProperty][r]]._children&&t[this.container[this.containerNodeProperty][r]]._children.sort((function(t,i){return e.container[e.containerNodeProperty].indexOf(t.shortId())-e.container[e.containerNodeProperty].indexOf(i.shortId())}));this.structure.splice(0,this.structure.length);var a=EcObject.keys(i);if(null!=this.startingSpotUri)this.structure.push(t[this.startingSpotUri]);else for(r=0;r<a.length;r++)this.structure.push(i[a[r]]);this.structure.sort((function(t,i){return e.container[e.containerNodeProperty].indexOf(t.shortId())-e.container[e.containerNodeProperty].indexOf(i.shortId())})),this.packChildren(this.structure),this.once=!1},packChildren:function(e){if(null!=e){for(var t=0;t<e.length;t++)e[t]={obj:e[t],children:void 0===e[t]._children?[]:e[t]._children},delete e[t].obj._children;for(t=0;t<e.length;t++)this.packChildren(e[t].children)}},beginDrag:function(){this.dragging=!0,void 0!==event&&(this.controlOnStart=event.originalEvent.ctrlKey||event.originalEvent.shiftKey)},endDrag:function(e){console.log(e.oldIndex,e.newIndex);var t=null,i=0;e.from.id===e.to.id?(e.newIndex<this.hierarchy.length&&(t=this.hierarchy[e.newIndex].obj.shortId()),i=1):void 0===e.to.children[e.newIndex]?t=e.to.id:e.newIndex+1<e.to.children.length&&(t=e.to.children[e.newIndex+1].id),this.move(this.hierarchy[e.oldIndex].obj.shortId(),t,e.from.id,e.to.id,!this.controlOnStart,i)},move:function(e,t,i,r,n,o){this.once=!0;var a=this,s=a.container[a.containerNodeProperty]?a.container[a.containerNodeProperty].slice():null,c=a.container[a.containerEdgeProperty]?a.container[a.containerEdgeProperty].slice():null,l=[];if(EcArray.isArray(a.container[a.containerEdgeProperty])||(a.container[a.containerEdgeProperty]=[]),e!==t){var d=this.container[this.containerNodeProperty].indexOf(e);console.log(d),this.container[this.containerNodeProperty].splice(d,1);var h=null;h=null==t||void 0===t?-1:this.container[this.containerNodeProperty].indexOf(t),console.log(h),o>0&&d<=h&&(h+=o),o<0&&d<h&&(h+=o),-1===h?this.container[this.containerNodeProperty].push(e):this.container[this.containerNodeProperty].splice(h,0,e)}if(i!==r){if(!0===n)for(var u=0;u<this.container[this.containerEdgeProperty].length;u++){var p=window[this.edgeType].getBlocking(this.container[this.containerEdgeProperty][u]);if(null!=p&&p[this.edgeRelationProperty]===this.edgeRelationLiteral){if(null==p[this.edgeTargetProperty])continue;if(null==p[this.edgeSourceProperty])continue;if(p[this.edgeSourceProperty]!==e)continue;console.log("Identified edge to remove: ",JSON.parse(p.toJson())),this.container[this.containerEdgeProperty].splice(u--,1)}}if(null!=r&&""!==r){p=new window[this.edgeType];if(null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&p.addOwner(EcIdentityManager.ids[0].ppk.toPk()),this.container.owner&&this.container.owner.length>0)for(var g=0;g<this.container.owner.length;g++){var m=this.container.owner[g];p.addOwner(EcPk.fromPem(m))}if(this.container.reader&&this.container.reader.length>0)for(g=0;g<this.container.reader.length;g++){var y=this.container.reader[g];p.addReader(EcPk.fromPem(y))}var f=window[this.nodeType].getBlocking(e),v=window[this.nodeType].getBlocking(r);null!=v&&void 0!==v&&(a.queryParams&&a.queryParams.newObjectEndpoint?p.generateShortId(this.queryParams.newObjectEndpoint):p.assignId(a.repo.selectedServer,EcCrypto.md5(f.shortId())+"_"+this.edgeRelationLiteral+"_"+EcCrypto.md5(v.shortId())),p.source=f.shortId(),p.target=v.shortId(),p.relationType=this.edgeRelationLiteral,this.container[this.containerEdgeProperty].push(p.shortId()),l.push(p.shortId()),console.log("Added edge: ",JSON.parse(p.toJson())),this.$store.state.editor&&!0===this.$store.state.editor.private&&(p=EcEncryptedValue.toEncryptedValue(p)),this.repo.saveTo(p,console.log,console.error))}}var w=this.stripEmptyArrays(this.container),E=[];for(u=0;u<l.length;u++)E.push({operation:"addNew",id:l[u]});E.push({operation:"update",id:a.container.shortId(),fieldChanged:["competency","relation"],initialValue:[s,c],changedValue:[this.container.competency,this.container.relation]}),a.$store.commit("editor/addEditsToUndo",E),w["schema:dateModified"]=(new Date).toISOString(),this.$store.state.editor&&!0===this.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap[w.id]&&(w=EcEncryptedValue.toEncryptedValue(w)),this.repo.saveTo(w,console.log,console.error),this.dragging=!1},add:function(e,t){var i=this,r=new window[this.nodeType],n=this.container.competency?this.container.competency.slice():null,o=this.container.relation?this.container.relation.slice():null;if(this.queryParams&&null!=this.queryParams.newObjectEndpoint?r.generateShortId(this.queryParams.newObjectEndpoint):r.generateId(this.repo.selectedServer),null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&r.addOwner(EcIdentityManager.ids[0].ppk.toPk()),this.container.owner&&this.container.owner.length>0)for(var a=0;a<this.container.owner.length;a++){var s=this.container.owner[a];r.addOwner(EcPk.fromPem(s))}if(this.container.reader&&this.container.reader.length>0)for(a=0;a<this.container.reader.length;a++){var c=this.container.reader[a];r.addReader(EcPk.fromPem(c))}if(EcArray.isArray(i.container[i.containerNodeProperty])||(i.container[i.containerNodeProperty]=[]),null==t||void 0===t)this.container[this.containerNodeProperty].unshift(r.shortId());else{var l=this.container[this.containerNodeProperty].indexOf(t);this.container[this.containerNodeProperty].splice(l+1,0,r.shortId())}i.$store.commit("editor/addEditsToUndo",[{operation:"addNew",id:r.shortId()},{operation:"update",id:i.container.shortId(),fieldChanged:["competency"],initialValue:[n],changedValue:[this.container.competency]}]);var d=this.nodeType;0===this.nodeType.indexOf("Ec")&&(d=this.nodeType.substring(2)),this.$store.state.editor&&this.$store.state.editor.defaultLanguage?r.name={"@language":this.$store.state.editor.defaultLanguage,"@value":"New "+d}:r.name="New "+d,r["schema:dateCreated"]=(new Date).toISOString(),r["schema:dateModified"]=(new Date).toISOString(),!0===this.$store.state.editor.private&&(r=EcEncryptedValue.toEncryptedValue(r)),this.container["schema:dateModified"]=(new Date).toISOString(),console.log("Added node: ",JSON.parse(r.toJson())),this.$store.state.editor&&this.$store.commit("editor/newCompetency",r.shortId()),this.$store.state.editor&&!0===this.$store.state.editor.private&&(r=EcEncryptedValue.toEncryptedValue(r)),this.repo.saveTo(r,(function(){if(e===i.container.shortId()){var t=i.container;t["schema:dateModified"]=(new Date).toISOString(),i.$store.state.editor&&!0===i.$store.state.editor.private&&!0!==EcEncryptedValue.encryptOnSaveMap(i.container.id)&&(t=EcEncryptedValue.toEncryptedValue(i.container)),i.repo.saveTo(i.stripEmptyArrays(t),(function(){i.once=!0}),console.error)}else window[i.nodeType].get(r.id,(function(t){var a=new window[i.edgeType];if(null!=EcIdentityManager.ids&&EcIdentityManager.ids.length>0&&a.addOwner(EcIdentityManager.ids[0].ppk.toPk()),i.container.owner&&i.container.owner.length>0)for(var s=0;s<i.container.owner.length;s++){var c=i.container.owner[s];a.addOwner(EcPk.fromPem(c))}if(i.container.reader&&i.container.reader.length>0)for(s=0;s<i.container.reader.length;s++){var l=i.container.reader[s];a.addReader(EcPk.fromPem(l))}var d=t,h=window[i.nodeType].getBlocking(e);i.queryParams&&i.queryParams.newObjectEndpoint?a.generateShortId(i.queryParams.newObjectEndpoint):a.assignId(i.repo.selectedServer,EcCrypto.md5(d.shortId())+"_"+i.edgeRelationLiteral+"_"+EcCrypto.md5(h.shortId())),a.source=d.shortId(),a.target=h.shortId(),a.relationType=i.edgeRelationLiteral,EcArray.isArray(i.container[i.containerEdgeProperty])||(i.container[i.containerEdgeProperty]=[]),i.container[i.containerEdgeProperty].push(a.shortId()),console.log("Added edge: ",JSON.parse(a.toJson())),i.$store.commit("editor/addEditsToUndo",[{operation:"addNew",id:r.shortId()},{operation:"update",id:i.container.shortId(),fieldChanged:["competency","relation"],initialValue:[n,o],changedValue:[i.container.competency,i.container.relation]}]);var u=i.container;u["schema:dateModified"]=(new Date).toISOString(),i.$store.state.editor&&!0===i.$store.state.editor.private&&(a=EcEncryptedValue.toEncryptedValue(a),!0!==EcEncryptedValue.encryptOnSaveMap(i.container.id)&&(u=EcEncryptedValue.toEncryptedValue(i.container))),i.repo.saveTo(a,console.log,console.error),i.repo.saveTo(i.stripEmptyArrays(u),(function(){i.once=!0}),console.error)}),console.error)}),console.error)},stripEmptyArrays:function(e){if(EcArray.isArray(e)){if(0===e.length)return null;for(var t=0;t<e.length;t++)e[t]=this.stripEmptyArrays(e[t]),null==e[t]&&e.splice(t--,1)}else if(EcObject.isObject(e))for(var i in e){var r=this.stripEmptyArrays(e[i]);null==r&&delete e[i]}return e},select:function(e,t){t?EcArray.setAdd(this.selectedArray,e):EcArray.setRemove(this.selectedArray,e)},deleteObject:function(e){this.$emit("deleteObject",e)},removeObject:function(e){this.$emit("removeObject",e)},exportObject:function(e,t){this.$emit("exportObject",e,t)},onDraggableCheck:function(e){this.isDraggable=e},clickToSearch:function(){this.$store.commit("editor/selectedCompetency",null);var e={selectedCompetency:null,searchType:"Competency",copyOrLink:!0,component:"Search"};this.$emit("searchThings",e),this.$store.commit("lode/competencySearchModalOpen",!0),this.$store.commit("lode/searchType","Competency"),this.$store.commit("lode/copyOrLink",!0)}}}),c=s,l=(i("791e"),i("2877")),d=Object(l["a"])(c,r,n,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-423ad069.98e232ac.js.map